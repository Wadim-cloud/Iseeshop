import{t as n,a as i}from"../chunks/fM_HHR7z.js";import{i as l}from"../chunks/Dcs68N15.js";import{p as m,o as p,a as g}from"../chunks/Cw_GAJ-8.js";import{s as k}from"../chunks/DTVZafTn.js";import{g as a}from"../chunks/E_7-NnNK.js";var f=n("<div>Authenticating...</div>");function v(r,s){m(s,!1),p(async()=>{console.log("Auth callback mounted");const{data:{session:e},error:o}=await k.auth.getSession();if(console.log("Callback session:",e,"Error:",o),o){console.error("Callback error:",o.message),a("/",{replaceState:!0});return}if(e){document.cookie=`sb-access-token=${e.access_token}; Path=/; SameSite=Lax; Max-Age=31536000`,document.cookie=`sb-refresh-token=${e.refresh_token}; Path=/; SameSite=Lax; Max-Age=31536000`,console.log("Cookies set in callback:",{accessToken:!!e.access_token,refreshToken:!!e.refresh_token});const t=localStorage.getItem("sb-redirect")||"/";localStorage.removeItem("sb-redirect"),console.log("Redirecting from callback:",t),a(t,{replaceState:!0})}else a("/",{replaceState:!0})}),l();var c=f();i(r,c),g()}export{v as component};
