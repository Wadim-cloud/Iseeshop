import{t as n,a as i}from"../chunks/DxolCNix.js";import"../chunks/Ci8d3Fat.js";import{p as l,o as m,a as p}from"../chunks/B668RH8u.js";import{i as g}from"../chunks/CHu_v1B0.js";import{s as k}from"../chunks/AJiKPocd.js";import{g as a}from"../chunks/ZC7F_AQJ.js";var f=n("<div>Authenticating...</div>");function x(r,s){l(s,!1),m(async()=>{console.log("Auth callback mounted");const{data:{session:e},error:o}=await k.auth.getSession();if(console.log("Callback session:",e,"Error:",o),o){console.error("Callback error:",o.message),a("/",{replaceState:!0});return}if(e){document.cookie=`sb-access-token=${e.access_token}; Path=/; SameSite=Lax; Max-Age=31536000`,document.cookie=`sb-refresh-token=${e.refresh_token}; Path=/; SameSite=Lax; Max-Age=31536000`,console.log("Cookies set in callback:",{accessToken:!!e.access_token,refreshToken:!!e.refresh_token});const t=localStorage.getItem("sb-redirect")||"/";localStorage.removeItem("sb-redirect"),console.log("Redirecting from callback:",t),a(t,{replaceState:!0})}else a("/",{replaceState:!0})}),g();var c=f();i(r,c),p()}export{x as component};
