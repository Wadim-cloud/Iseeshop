var rt=t=>{throw TypeError(t)};var Be=(t,e,r)=>e.has(t)||rt("Cannot "+r);var h=(t,e,r)=>(Be(t,e,"read from private field"),r?r.call(t):e.get(t)),E=(t,e,r)=>e.has(t)?rt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),T=(t,e,r,n)=>(Be(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ee=(t,e,r)=>(Be(t,e,"access private method"),r);import{d as nt,e as jt,t as x,a as p,n as Et,c as de,f as Bt}from"../chunks/DxolCNix.js";import{aq as Y,h as Fe,c as at,Z as qt,aX as Gt,k as Ve,a8 as Wt,aT as Dt,aS as Ft,s as Vt,V as Ce,b as Xt,E as Kt,g as Ht,Q as Ut,a6 as Yt,A as oe,aY as Zt,x as d,a1 as Jt,m as Qt,u as $t,aN as er,as as k,I as tr,at as y,aM as Ze,z as rr,aO as Z,aZ as nr,ag as G,p as Ee,av as R,a as ke,ar as b,o as kt}from"../chunks/B668RH8u.js";import{e as j,o as ge,h as Tt,s as Me}from"../chunks/DhXqswRN.js";import{i as N}from"../chunks/CoxfEDN7.js";import{s as xt,b as ue,a as ot}from"../chunks/BHuW5wU9.js";import{c as st,s as qe}from"../chunks/AJiKPocd.js";import{e as it,i as ct}from"../chunks/Dxuc275j.js";import{a as fe}from"../chunks/DGKrTPFL.js";import{s as Xe}from"../chunks/BavnsP6q.js";import{t as Ge,a as lt,s as ar}from"../chunks/CfWLuewf.js";import{s as ut}from"../chunks/Bfc47y5P.js";import{b as dt}from"../chunks/B1fvfluE.js";import{p as We}from"../chunks/CJMrvfOc.js";import{g as Ke}from"../chunks/ZC7F_AQJ.js";import{g as De,w as ft}from"../chunks/CxeLWBhm.js";import"../chunks/Ci8d3Fat.js";import{p as I}from"../chunks/BfDDsPvW.js";function or(t,e,r=!1,n=!1,o=!1){var a=t,i="";Y(()=>{var l=qt;if(i===(i=e()??"")){Fe&&at();return}if(l.nodes_start!==null&&(Gt(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),i!==""){if(Fe){Ve.data;for(var u=at(),f=u;u!==null&&(u.nodeType!==8||u.data!=="");)f=u,u=Wt(u);if(u===null)throw Dt(),Ft;nt(Ve,f),a=Vt(u);return}var m=i+"";r?m=`<svg>${m}</svg>`:n&&(m=`<math>${m}</math>`);var _=jt(m);if((r||n)&&(_=Ce(_)),nt(Ce(_),_.lastChild),r||n)for(;Ce(_);)a.before(Ce(_));else a.before(_)}})}function sr(t,e,...r){var n=t,o=Ut,a;Xt(()=>{o!==(o=e())&&(a&&(Yt(a),a=null),a=Ht(()=>o(n,...r)))},Kt),Fe&&(n=Ve)}function ir(t){oe(t,t.v+1)}function ze(t){let e=0,r=Jt(0),n;return()=>{Zt()&&(d(r),Qt(()=>(e===0&&(n=$t(()=>t(()=>ir(r)))),e+=1,()=>{er().then(()=>{e-=1,e===0&&(n==null||n(),n=void 0)})})))}}var cr=Et('<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>'),lr=Et('<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>'),ur=x('<div><button class="toggle-switch svelte-1owz5qj" aria-label="Toggle theme"><div class="toggle-slider svelte-1owz5qj"><!></div></button></div>');function mt(t){let e=tr(!1);function r(){oe(e,!d(e))}var n=ur(),o=k(n),a=k(o),i=k(a);{var l=f=>{var m=cr();p(f,m)},u=f=>{var m=lr();p(f,m)};N(i,f=>{d(e)?f(l):f(u,!1)})}y(a),y(o),y(n),Y(()=>Xe(n,1,`toggle-container ${d(e)?"dark-mode":"light-mode"}`,"svelte-1owz5qj")),j("click",o,r),p(t,n)}function dr(t){return typeof t=="function"}function fr(t){return t!==null&&typeof t=="object"}const pe=Symbol("box"),Je=Symbol("is-writable");function mr(t){return fr(t)&&pe in t}function hr(t){return w.isBox(t)&&Je in t}function w(t){let e=Ze(rr(t));return{[pe]:!0,[Je]:!0,get current(){return d(e)},set current(r){oe(e,r,!0)}}}function vr(t,e){const r=Z(t);return e?{[pe]:!0,[Je]:!0,get current(){return d(r)},set current(n){e(n)}}:{[pe]:!0,get current(){return t()}}}function gr(t){return w.isBox(t)?t:dr(t)?w.with(t):w(t)}function pr(t){return Object.entries(t).reduce((e,[r,n])=>w.isBox(n)?(w.isWritableBox(n)?Object.defineProperty(e,r,{get(){return n.current},set(o){n.current=o}}):Object.defineProperty(e,r,{get(){return n.current}}),e):Object.assign(e,{[r]:n}),{})}function _r(t){return w.isWritableBox(t)?{[pe]:!0,get current(){return t.current}}:t}w.from=gr;w.with=vr;w.flatten=pr;w.readonly=_r;w.isBox=mr;w.isWritableBox=hr;var Ct={},ht=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,wr=/\n/g,yr=/^\s*/,br=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Sr=/^:\s*/,Er=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,kr=/^[;\s]*/,Tr=/^\s+|\s+$/g,xr=`
`,vt="/",gt="*",te="",Cr="comment",Mr="declaration",Ar=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var r=1,n=1;function o(c){var s=c.match(wr);s&&(r+=s.length);var g=c.lastIndexOf(xr);n=~g?c.length-g:n+c.length}function a(){var c={line:r,column:n};return function(s){return s.position=new i(c),f(),s}}function i(c){this.start=c,this.end={line:r,column:n},this.source=e.source}i.prototype.content=t;function l(c){var s=new Error(e.source+":"+r+":"+n+": "+c);if(s.reason=c,s.filename=e.source,s.line=r,s.column=n,s.source=t,!e.silent)throw s}function u(c){var s=c.exec(t);if(s){var g=s[0];return o(g),t=t.slice(g.length),s}}function f(){u(yr)}function m(c){var s;for(c=c||[];s=_();)s!==!1&&c.push(s);return c}function _(){var c=a();if(!(vt!=t.charAt(0)||gt!=t.charAt(1))){for(var s=2;te!=t.charAt(s)&&(gt!=t.charAt(s)||vt!=t.charAt(s+1));)++s;if(s+=2,te===t.charAt(s-1))return l("End of comment missing");var g=t.slice(2,s-2);return n+=2,o(g),t=t.slice(s),n+=2,c({type:Cr,comment:g})}}function J(){var c=a(),s=u(br);if(s){if(_(),!u(Sr))return l("property missing ':'");var g=u(Er),q=c({type:Mr,property:pt(s[0].replace(ht,te)),value:g?pt(g[0].replace(ht,te)):te});return u(kr),q}}function Q(){var c=[];m(c);for(var s;s=J();)s!==!1&&(c.push(s),m(c));return c}return f(),Q()};function pt(t){return t?t.replace(Tr,te):te}var Rr=st&&st.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ct,"__esModule",{value:!0});var _t=Ct.default=Pr,Ir=Rr(Ar);function Pr(t,e){var r=null;if(!t||typeof t!="string")return r;var n=(0,Ir.default)(t),o=typeof e=="function";return n.forEach(function(a){if(a.type==="declaration"){var i=a.property,l=a.value;o?e(i,l,a):l&&(r=r||{},r[i]=l)}}),r}_t.default;function Nr(t,e){const r=RegExp(t,"g");return n=>{if(typeof n!="string")throw new TypeError(`expected an argument of type string, but got ${typeof n}`);return n.match(r)?n.replace(r,e):n}}const Or=Nr(/[A-Z]/,t=>`-${t.toLowerCase()}`);function zr(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected an argument of type object, but got ${typeof t}`);return Object.keys(t).map(e=>`${Or(e)}: ${t[e]};`).join(`
`)}function Lr(t={}){return zr(t).replace(`
`," ")}const jr={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};Lr(jr);const Br=typeof window<"u"?window:void 0;function qr(t){let e=t.activeElement;for(;e!=null&&e.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}var _e,we;class Gr{constructor(e,r){E(this,_e);E(this,we);T(this,_e,e),T(this,we,ze(r))}get current(){return h(this,we).call(this),h(this,_e).call(this)}}_e=new WeakMap,we=new WeakMap;const Wr=/\(.+\)/;class Dr extends Gr{constructor(e,r){let n=Wr.test(e)?e:`(${e})`;const o=window.matchMedia(n);super(()=>o.matches,a=>ge(o,"change",a))}}var me,ye,St;let Fr=(St=class{constructor(e={}){E(this,me);E(this,ye);const{window:r=Br,document:n=r==null?void 0:r.document}=e;r!==void 0&&(T(this,me,n),T(this,ye,ze(o=>{const a=ge(r,"focusin",o),i=ge(r,"focusout",o);return()=>{a(),i()}})))}get current(){var e;return(e=h(this,ye))==null||e.call(this),h(this,me)?qr(h(this,me)):null}},me=new WeakMap,ye=new WeakMap,St);new Fr;function wt(t){return t.filter(e=>e.length>0)}const Mt={getItem:t=>null,setItem:(t,e)=>{}},Te=typeof document<"u",Vr=["dark","light","system"];function He(t){return typeof t!="string"?!1:Vr.includes(t)}const At=typeof window<"u"?window:void 0;function Xr(t){let e=t.activeElement;for(;e!=null&&e.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}var he,be;class Kr{constructor(e={}){E(this,he);E(this,be);const{window:r=At,document:n=r==null?void 0:r.document}=e;r!==void 0&&(T(this,he,n),T(this,be,ze(o=>{const a=ge(r,"focusin",o),i=ge(r,"focusout",o);return()=>{a(),i()}})))}get current(){var e;return(e=h(this,be))==null||e.call(this),h(this,he)?Xr(h(this,he)):null}}he=new WeakMap,be=new WeakMap;new Kr;function Hr(t,e){switch(t){case"local":return e.localStorage;case"session":return e.sessionStorage}}var ne,W,ve,ae,Se,P,Oe,B,Ae,Re;class Rt{constructor(e,r,n={}){E(this,B);E(this,ne);E(this,W);E(this,ve);E(this,ae);E(this,Se);E(this,P,Ze(0));E(this,Oe,e=>{e.key!==h(this,W)||e.newValue===null||(T(this,ne,ee(this,B,Ae).call(this,e.newValue)),oe(h(this,P),d(h(this,P))+1))});const{storage:o="local",serializer:a={serialize:JSON.stringify,deserialize:JSON.parse},syncTabs:i=!0,window:l=At}=n;if(T(this,ne,r),T(this,W,e),T(this,ve,a),l===void 0)return;const u=Hr(o,l);T(this,ae,u);const f=u.getItem(e);f!==null?T(this,ne,ee(this,B,Ae).call(this,f)):ee(this,B,Re).call(this,r),i&&o==="local"&&T(this,Se,ze(()=>ge(l,"storage",h(this,Oe))))}get current(){var o,a;(o=h(this,Se))==null||o.call(this),d(h(this,P));const e=ee(this,B,Ae).call(this,(a=h(this,ae))==null?void 0:a.getItem(h(this,W)))??h(this,ne),r=new WeakMap,n=i=>{if(i===null||(i==null?void 0:i.constructor.name)==="Date"||typeof i!="object")return i;let l=r.get(i);return l||(l=new Proxy(i,{get:(u,f)=>(d(h(this,P)),n(Reflect.get(u,f))),set:(u,f,m)=>(oe(h(this,P),d(h(this,P))+1),Reflect.set(u,f,m),ee(this,B,Re).call(this,e),!0)}),r.set(i,l)),l};return n(e)}set current(e){ee(this,B,Re).call(this,e),oe(h(this,P),d(h(this,P))+1)}}ne=new WeakMap,W=new WeakMap,ve=new WeakMap,ae=new WeakMap,Se=new WeakMap,P=new WeakMap,Oe=new WeakMap,B=new WeakSet,Ae=function(e){try{return h(this,ve).deserialize(e)}catch(r){console.error(`Error when parsing "${e}" from persisted store "${h(this,W)}"`,r);return}},Re=function(e){var r;try{e!=null&&((r=h(this,ae))==null||r.setItem(h(this,W),h(this,ve).serialize(e)))}catch(n){console.error(`Error when writing value from persisted store "${h(this,W)}" to ${h(this,ae)}`,n)}};let yt,bt;function It(t){if(typeof document>"u")return;clearTimeout(yt),clearTimeout(bt);const e=document.createElement("style"),r=document.createTextNode(`* {
     -webkit-transition: none !important;
     -moz-transition: none !important;
     -o-transition: none !important;
     -ms-transition: none !important;
     transition: none !important;
  }`);e.appendChild(r);const n=()=>document.head.appendChild(e),o=()=>document.head.removeChild(e);if(typeof window.getComputedStyle<"u"){n(),t(),window.getComputedStyle(e).opacity,o();return}if(typeof window.requestAnimationFrame<"u"){n(),t(),window.requestAnimationFrame(o);return}n(),yt=window.setTimeout(()=>{t(),bt=window.setTimeout(o,120)},120)}const Pe=w("mode-watcher-mode"),Ne=w("mode-watcher-theme"),Ue=Ur(),Ye=Zr(),re=w(void 0),Ie=Yr(),Qe=w(!0),Pt=w([]),Nt=w([]);function Ur(){const t="system",r=(Te?localStorage:Mt).getItem(Pe.current),n=He(r)?r:t;return new Rt(Pe.current,n,{serializer:{serialize:o=>o,deserialize:o=>He(o)?o:t}})}function Yr(){const e=(Te?localStorage:Mt).getItem(Ne.current),r=e??"";return new Rt(Ne.current,r,{serializer:{serialize:n=>typeof n!="string"?"":n,deserialize:n=>n}})}function Zr(){let e=!0,r=Ze(void 0);function n(){Te&&oe(r,a.current?"light":"dark",!0)}function o(i){e=i}const a=typeof window<"u"&&"matchMedia"in window?new Dr("prefers-color-scheme: light"):{current:!1};return nr(()=>{G(()=>{e&&n()})}),{get current(){return d(r)},query:n,tracking:o}}function Jr(){const t=Z(()=>{if(!Te)return;const e=Ue.current==="system"?Ye.current:Ue.current,r=wt(Pt.current),n=wt(Nt.current);function o(){const a=document.documentElement,i=document.querySelector('meta[name="theme-color"]');e==="light"?(r.length&&a.classList.remove(...r),n.length&&a.classList.add(...n),a.style.colorScheme="light",i&&re.current&&i.setAttribute("content",re.current.light)):(n.length&&a.classList.remove(...n),r.length&&a.classList.add(...r),a.style.colorScheme="dark",i&&re.current&&i.setAttribute("content",re.current.dark))}return Qe.current?It(o):o(),e});return{get current(){return d(t)}}}function Qr(){const t=Z(()=>{if(Ie.current,!Te)return;function e(){document.documentElement.setAttribute("data-theme",Ie.current)}return Qe.current?It(e):e(),Ie.current});return{get current(){return d(t)}}}const $r=Jr(),en=Qr();function tn(t){Ue.current=t}function rn(t){Ie.current=t}function nn({defaultMode:t="system",themeColors:e,darkClassNames:r=["dark"],lightClassNames:n=[],defaultTheme:o="",modeStorageKey:a="mode-watcher-mode",themeStorageKey:i="mode-watcher-theme"}){const l=document.documentElement,u=localStorage.getItem(a)??t,f=localStorage.getItem(i)??o,m=u==="light"||u==="system"&&window.matchMedia("(prefers-color-scheme: light)").matches;if(m?(r.length&&l.classList.remove(...r),n.length&&l.classList.add(...n)):(n.length&&l.classList.remove(...n),r.length&&l.classList.add(...r)),l.style.colorScheme=m?"light":"dark",e){const _=document.querySelector('meta[name="theme-color"]');_&&_.setAttribute("content",u==="light"?e.light:e.dark)}f&&(l.setAttribute("data-theme",f),localStorage.setItem(i,f)),localStorage.setItem(a,u)}var an=x('<meta name="theme-color">');function on(t,e){Ee(e,!0);var r=de(),n=R(r);{var o=a=>{var i=an();Y(()=>fe(i,"content",e.themeColors.dark)),p(a,i)};N(n,a=>{e.themeColors&&a(o)})}p(t,r),ke()}var sn=x('<meta name="theme-color">'),cn=x("<!> <!>",1);function ln(t,e){Ee(e,!0);let r=I(e,"trueNonce",3,"");Tt(n=>{var o=cn(),a=R(o);{var i=u=>{var f=sn();Y(()=>fe(f,"content",e.themeColors.dark)),p(u,f)};N(a,u=>{e.themeColors&&u(i)})}var l=b(a,2);or(l,()=>`<script${r()?` nonce=${r()}`:""}>(`+nn.toString()+")("+JSON.stringify(e.initConfig)+");<\/script>"),p(n,o)}),ke()}function un(t,e){Ee(e,!0);let r=I(e,"track",3,!0),n=I(e,"defaultMode",3,"system"),o=I(e,"disableTransitions",3,!0),a=I(e,"darkClassNames",19,()=>["dark"]),i=I(e,"lightClassNames",19,()=>[]),l=I(e,"defaultTheme",3,""),u=I(e,"nonce",3,""),f=I(e,"themeStorageKey",3,"mode-watcher-theme"),m=I(e,"modeStorageKey",3,"mode-watcher-mode"),_=I(e,"disableHeadScriptInjection",3,!1);G(()=>{Qe.current=o()}),G(()=>{re.current=e.themeColors}),G(()=>{Pt.current=a()}),G(()=>{Nt.current=i()}),G(()=>{Pe.current=m()}),G(()=>{Ne.current=f()}),G(()=>{$r.current}),G(()=>{en.current}),kt(()=>{Ye.tracking(r()),Ye.query();const S=localStorage.getItem(Pe.current);tn(He(S)?S:n());const v=localStorage.getItem(Ne.current);rn(v||l())});const J={defaultMode:n(),themeColors:e.themeColors,darkClassNames:a(),lightClassNames:i(),defaultTheme:l(),modeStorageKey:m(),themeStorageKey:f()},Q=Z(()=>typeof window>"u"?u():"");var c=de(),s=R(c);{var g=S=>{on(S,{get themeColors(){return re.current}})},q=S=>{ln(S,{get trueNonce(){return d(Q)},initConfig:J,get themeColors(){return re.current}})};N(s,S=>{_()?S(g):S(q,!1)})}p(t,c),ke()}var dn=x('<div class="nav-dot svelte-172c0m4"><span class="dot-tooltip svelte-172c0m4">Menu</span></div>'),fn=x("<a> </a>"),mn=x('<div class="mobile-overlay svelte-172c0m4"><nav class="mobile-menu svelte-172c0m4"><a href="/" class="brand svelte-172c0m4"><img src="/logo192.png" alt="Pexos Logo" class="logo svelte-172c0m4"> <span class="brand-name svelte-172c0m4">Pexos</span></a> <div class="nav-links svelte-172c0m4"></div> <div class="auth-section svelte-172c0m4"><div class="user-profile svelte-172c0m4"><img alt="User Avatar" class="avatar svelte-172c0m4"> <span class="username svelte-172c0m4"> </span></div> <!> <button class="auth-button sign-out svelte-172c0m4">Sign Out</button></div></nav></div>'),hn=x("<a> </a>"),vn=x('<div class="user-profile svelte-172c0m4"><img alt="User Avatar" class="avatar svelte-172c0m4"> <span class="username svelte-172c0m4"> </span></div> <!> <button class="auth-button sign-out svelte-172c0m4">Sign Out</button>',1),gn=x('<nav class="navbar svelte-172c0m4"><div class="nav-container svelte-172c0m4"><a href="/" class="brand svelte-172c0m4"><img src="/logo192.png" alt="Pexos Logo" class="logo svelte-172c0m4"> <span class="brand-name svelte-172c0m4">Pexos</span></a> <div class="nav-links svelte-172c0m4"></div> <div class="auth-section svelte-172c0m4"><!></div></div></nav>');function pn(t,e){Ee(e,!0);const[r,n]=xt(),o=[{name:"Todo",href:"/todo",authRequired:!0},{name:"Gallery",href:"/gallery",authRequired:!0},{name:"Create",href:"/create",authRequired:!0},{name:"About",href:"/about",authRequired:!0}];let a=Z(()=>{var v;return(v=e.session)==null?void 0:v.user}),i=Z(()=>{var v,C;return((C=(v=d(a))==null?void 0:v.user_metadata)==null?void 0:C.avatar_url)||"/default-avatar.png"}),l=Z(()=>{var v,C,$,D;return((C=(v=d(a))==null?void 0:v.user_metadata)==null?void 0:C.full_name)||((D=($=d(a))==null?void 0:$.email)==null?void 0:D.split("@")[0])||"User"}),u=Z(()=>De(We).url.pathname==="/create"),f=!1,m=!0,_=!1;kt(()=>{const v=()=>f=window.innerWidth<=768;return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)});const J=()=>{m=!m},Q=()=>{m=!0},c=async()=>{_=!0,m=!0,await Ke("/create")};var s=de(),g=R(s);{var q=v=>{var C=de(),$=R(C);{var D=F=>{var O=dn();j("click",O,J),Ge(1,O,()=>lt),p(F,O)},xe=F=>{var O=mn(),z=k(O),M=k(z),L=b(M,2);it(L,21,()=>o,ct,(U,ce)=>{var $e=de(),Ot=R($e);{var zt=Le=>{var le=fn();let et;var Lt=k(le,!0);y(le),Y(je=>{fe(le,"href",d(ce).href),et=Xe(le,1,"nav-link svelte-172c0m4",null,et,je),Me(Lt,d(ce).name)},[()=>({active:De(We).url.pathname===d(ce).href})]),j("click",le,function(...je){var tt;(tt=d(ce).href==="/create"?c:()=>m=!0)==null||tt.apply(this,je)}),p(Le,le)};N(Ot,Le=>{(!d(ce).authRequired||d(ce).authRequired&&e.session)&&Le(zt)})}p(U,$e)}),y(L);var V=b(L,2),X=k(V),K=k(X),A=b(K,2),se=k(A,!0);y(A),y(X);var ie=b(X,2);mt(ie);var H=b(ie,2);y(V),y(z),y(O),Y(()=>{fe(K,"src",d(i)),Me(se,d(l))}),j("click",M,()=>m=!0),j("click",H,()=>{m=!0,e.onAuthToggle()}),j("click",V,ut(function(U){dt.call(this,e,U)})),Ge(1,z,()=>ar),j("click",z,ut(function(U){dt.call(this,e,U)})),j("click",O,Q),p(F,O)};N($,F=>{m?F(D):F(xe,!1)})}p(v,C)},S=v=>{var C=gn(),$=k(C),D=b(k($),2);it(D,21,()=>o,ct,(z,M)=>{var L=de(),V=R(L);{var X=K=>{var A=hn();let se;var ie=k(A,!0);y(A),Y(H=>{fe(A,"href",d(M).href),se=Xe(A,1,"nav-link svelte-172c0m4",null,se,H),Me(ie,d(M).name)},[()=>({active:De(We).url.pathname===d(M).href})]),j("click",A,function(...H){var U;(U=d(M).href==="/create"?c:void 0)==null||U.apply(this,H)}),p(K,A)};N(V,K=>{(!d(M).authRequired||d(M).authRequired&&e.session)&&K(X)})}p(z,L)}),y(D);var xe=b(D,2),F=k(xe);{var O=z=>{var M=vn(),L=R(M),V=k(L),X=b(V,2),K=k(X,!0);y(X),y(L);var A=b(L,2);mt(A);var se=b(A,2);Y(()=>{fe(V,"src",d(i)),Me(K,d(l))}),j("click",se,function(...ie){var H;(H=e.onAuthToggle)==null||H.apply(this,ie)}),p(z,M)};N(F,z=>{d(a)&&z(O)})}y(xe),y($),y(C),Ge(1,C,()=>lt,()=>({duration:200})),p(v,C)};N(g,v=>{(f||d(u)||_)&&d(a)?v(q):v(S,!1)})}p(t,s),ke(),n()}var _n=Bt(`<script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TVHZWJGB');
    <\/script><!---->`,1),wn=x('<meta name="google-site-verification" content="fP4cuGw4wrszN9kcVbzYHTB8bKj4YSxHTyZDSGOvyPk"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta property="og:title" content="Pexos, collaborative creative platform"> <meta property="og:description" content="Log in and start creating."> <meta property="og:image" content="https://pexos.netlify.app/logo192.png"> <meta property="og:url" content="https://pexos.netlify.app"> <meta property="og:type" content="website"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:title" content="Pexos, collaborative creative platform"> <meta name="twitter:description" content="Log in and start creating."> <meta name="twitter:image" content="https://pexos.netlify.app/logo192.png"> <!>',1),yn=x("<div>Loading...</div>"),bn=x("<!> <!>",1),Sn=x("<noscript></noscript> <!> <!>",1);function Dn(t,e){Ee(e,!0);const[r,n]=xt(),o=()=>ot(i,"$sessionStore",r),a=()=>ot(l,"$loading",r),i=ft(e.data.session),l=ft(!0);qe.auth.getSession().then(async({data:{session:c},error:s})=>{console.log("Client session loaded at:",new Date().toISOString()),s&&console.error("Session load error:",s.message),ue(i,c||e.data.session),ue(l,!1)}).catch(c=>{console.error("Session load error:",c),ue(i,null),ue(l,!1)}),qe.auth.onAuthStateChange((c,s)=>{var g;console.log("Layout auth state changed:",c,(g=s==null?void 0:s.user)==null?void 0:g.email),ue(i,s),c==="SIGNED_OUT"&&(console.log("User signed out, redirecting to /"),Ke("/",{replaceState:!0}))});async function u(){if(o()){console.log("Initiating sign out");try{const{error:c}=await qe.auth.signOut();if(c)throw console.error("Sign out error:",c.message),c;console.log("Signed out successfully"),ue(i,null),Ke("/",{replaceState:!0})}catch(c){console.error("Sign out failed:",c)}}}var f=Sn();Tt(c=>{var s=wn(),g=b(R(s),22);{var q=S=>{var v=_n();b(R(v)),p(S,v)};N(g,S=>{S(q)})}p(c,s)});var m=b(R(f),2);un(m,{});var _=b(m,2);{var J=c=>{var s=yn();p(c,s)},Q=c=>{var s=bn(),g=R(s);pn(g,{get session(){return o()},onAuthToggle:u});var q=b(g,2);sr(q,()=>e.children),p(c,s)};N(_,c=>{a()?c(J):c(Q,!1)})}p(t,f),ke(),n()}export{Dn as component};
