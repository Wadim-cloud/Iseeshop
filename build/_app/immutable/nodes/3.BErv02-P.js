import{t as A,a as y}from"../chunks/B2hSDNwb.js";import{i as se}from"../chunks/BkJq1j4_.js";import{p as ne,o as re,ah as ke,ai as Te,aj as Ee,aw as Be,ak as Pe,a as le,al as q,am as _,x as e,I as w,A as p,ag as n,au as Fe,an as L,ax as ce}from"../chunks/Bxdg7ccW.js";import{p as u,s as Ze}from"../chunks/Czyh_-as.js";import{e as H,s as Ie}from"../chunks/6og0jn-Y.js";import{i as F}from"../chunks/Bqnn9XxY.js";import{b as We}from"../chunks/C7mBFiPQ.js";import{g as Ue,h as Ve,W as je,A as Ye,D as ie,V as G,f as Oe,j as qe,k as J,l as Z}from"../chunks/Db2sCihH.js";import{S as He}from"../chunks/BjVaaCQb.js";import{O as Ge}from"../chunks/bDxDMfUK.js";import"../chunks/wkM8Wptt.js";import"../chunks/IbqXbPHK.js";var Je=A('<p class="error-message svelte-htrp2t">Error loading 3D model.</p>'),Ke=A('<p class="loading-message svelte-htrp2t">Loading texture...</p>'),Ne=A('<p class="error-message svelte-htrp2t">Error loading texture.</p>'),Qe=A('<div class="upload-container svelte-htrp2t"><input type="file" accept="image/*" class="svelte-htrp2t"> <p>Upload your own picture to texture the model.</p></div>'),Xe=A('<div class="floating-model-container svelte-htrp2t"><!> <div class="controls svelte-htrp2t"><button class="svelte-htrp2t"> </button> <button class="svelte-htrp2t">Reset View</button></div></div> <!>',1);function $e(I,r){ne(r,!1);let W=u(r,"stlFile",8,"/models/tshirt.stl"),h=u(r,"defaultTextureImage",8,"/texture/boom.png");u(r,"width",8,"100%"),u(r,"height",8,"300px");let M=u(r,"backgroundColor",8,0),U=u(r,"modelColor",8,8421504),de=u(r,"floating",8,!1),fe=u(r,"rotationSpeedY",8,.01),ue=u(r,"autoRotate",8,!0),pe=u(r,"enableZoom",8,!0),V=u(r,"initialZoom",8,8),C=u(r,"drawingData",8,null),m=w(null),g,d,o,i=w(null),t=w(null),S=null,K=w(!1),N=0;const me=.005,ve=.1;let x=w(!1),j=w(!1);re(()=>{setTimeout(()=>{e(m)&&ge()}),window.addEventListener("resize",X)}),ke(()=>{var a;window.removeEventListener("resize",X),o&&(o.dispose(),o.forceContextLoss()),(a=e(i))!=null&&a.material&&(Array.isArray(e(i).material)?e(i).material.forEach(s=>s.dispose()):e(i).material.dispose()),e(t)&&e(t).dispose()});function ge(){var T,b,E;const a=((T=e(m))==null?void 0:T.offsetWidth)||800,s=((b=e(m))==null?void 0:b.offsetHeight)||600;g=new Ue,d=new Ve(75,a/s,.1,1e3),d.position.z=V(),o=new je({antialias:!0,alpha:!0}),o.setSize(a,s),o.setClearColor(M(),1),(E=e(m))==null||E.appendChild(o.domElement),p(t,new Ge(d,o.domElement)),n(t,e(t).enableZoom=pe()),n(t,e(t).enablePan=!1),n(t,e(t).minPolarAngle=Math.PI/2),n(t,e(t).maxPolarAngle=Math.PI/2),n(t,e(t).enableDamping=!0),n(t,e(t).dampingFactor=.05),n(t,e(t).autoRotate=ue()),n(t,e(t).autoRotateSpeed=fe()*10),n(t,e(t).minDistance=3),n(t,e(t).maxDistance=15);const l=new Ye(4210752);g.add(l);const f=new ie(16777215,.7);f.position.set(1,1,1).normalize(),g.add(f);const c=new ie(16777215,.3);c.position.set(-1,-1,-1).normalize(),g.add(c),new He().load(W(),v=>{v.computeBoundingBox();const B=v.boundingBox,O=new G;B.getSize(O);const Me=v.getAttribute("position"),ae=[],P=Me.array;for(let R=0;R<P.length;R+=3){const ze=P[R],De=P[R+1];P[R+2],ae.push((ze-B.min.x)/O.x,(De-B.min.y)/O.y)}v.setAttribute("uv",new Oe(ae,2));const Se=Y();p(i,new qe(v,Se)),v.computeBoundingBox();const oe=new G;B.getCenter(oe),e(i).position.sub(oe),g.add(e(i)),he(v),Q()},void 0,v=>{console.error("STL Load Error:",v),p(K,!0)})}function he(a){if(!a||!a.boundingBox)return;const s=a.boundingBox,l=new G;s.getSize(l);const f=Math.max(l.x,l.y,l.z);if(f>0&&(f>10||f<.1)){const c=Math.max(f*2,V());d.position.z=c,e(t)&&(n(t,e(t).minDistance=c*.5),n(t,e(t).maxDistance=c*2))}}function Y(){p(x,!0),p(j,!1);try{if(C()){const a=new J().load(C());return a.anisotropy=(o==null?void 0:o.capabilities.getMaxAnisotropy())||1,p(x,!1),new Z({map:a})}if(S)return S.anisotropy=(o==null?void 0:o.capabilities.getMaxAnisotropy())||1,p(x,!1),new Z({map:S});if(h()){const a=new J().load(h());return a.anisotropy=(o==null?void 0:o.capabilities.getMaxAnisotropy())||1,p(x,!1),new Z({map:a})}}catch(a){console.error("Texture load error:",a),p(j,!0)}return p(x,!1),new Z({color:U(),specular:1118481,shininess:30})}function Q(){!o||!g||!d||(requestAnimationFrame(Q),e(t)&&e(t).update(),e(i)&&de()&&(N+=me,n(i,e(i).position.y=Math.sin(N)*ve)),o.render(g,d))}function X(){if(!d||!o||!e(m))return;const a=e(m).offsetWidth,s=e(m).offsetHeight;d.aspect=a/s,d.updateProjectionMatrix(),o.setSize(a,s)}function xe(a){var f;const s=(f=a.target.files)==null?void 0:f[0];if(!s)return;const l=new FileReader;l.onload=()=>{S=new J().load(l.result),e(i)&&(n(i,e(i).material=Y()),n(i,e(i).material.needsUpdate=!0))},l.readAsDataURL(s)}function be(){e(t)&&n(t,e(t).autoRotate=!e(t).autoRotate)}function we(){d&&e(t)&&(d.position.z=V(),d.position.x=0,d.position.y=0,e(t).target.set(0,0,0),e(t).update())}Te(()=>(Fe(C()),e(i)),()=>{C()&&e(i)&&(n(i,e(i).material=Y()),n(i,e(i).material.needsUpdate=!0))}),Ee(),se();var $=Xe(),z=Be($),ee=_(z);{var ye=a=>{var s=Je();y(a,s)},_e=(a,s)=>{{var l=c=>{var k=Ke();y(c,k)},f=(c,k)=>{{var T=b=>{var E=Ne();y(b,E)};F(c,b=>{e(j)&&b(T)},k)}};F(a,c=>{e(x)?c(l):c(f,!1)},s)}};F(ee,a=>{e(K)?a(ye):a(_e,!1)})}var te=q(ee,2),D=_(te),Le=_(D,!0);L(D);var Ae=q(D,2);L(te),L(z),We(z,a=>p(m,a),()=>e(m));var Ce=q(z,2);{var Re=a=>{var s=Qe(),l=_(s);ce(2),L(s),H("change",l,xe),y(a,s)};F(Ce,a=>{C()||a(Re)})}Pe(()=>{var a;return Ie(Le,(a=e(t))!=null&&a.autoRotate?"Stop Rotation":"Start Rotation")}),H("click",D,be),H("click",Ae,we),y(I,$),le()}var et=A('<div class="page-wrapper svelte-5cpycs"><div class="model-container svelte-5cpycs"><!></div> <div class="about-section svelte-5cpycs"><h2 class="svelte-5cpycs">About Pexos</h2> <p class="svelte-5cpycs">Wadim Seminsky and Bertin van Vliet, two passionate visionaries, crafted Pexos as a vibrant creative platform where artists can unleash their imaginations and bring drawings to life. This space is a celebration of art, innovation, and community.</p> <p class="svelte-5cpycs">Right now, we’re rallying support for a heartfelt cause—raising funds to help a dear friend get new teeth, restoring their confidence and smile. Every small gesture counts, and you can make a difference! Join us in this mission by grabbing a virtual coffee for the cause at <a href="https://buymeacoffee.com/wadiem" target="_blank" class="coffee-button svelte-5cpycs">buymeacoffee.com/wadiem</a>. Your support fuels both creativity and kindness!</p></div> <p class="quote svelte-5cpycs">"They hang me up to dry too many times" - Cold War Kids</p></div>');function pt(I,r){ne(r,!1);const W={stlFile:"/models/tshirt.stl",defaultTextureImage:"/texture/boom.png",width:"100%",height:"400px",backgroundColor:"#f0f0f0",modelColor:"#cccccc",floating:!0,rotationSpeedY:.5,autoRotate:!0,enableZoom:!0};re(async()=>{}),se();var h=et(),M=_(h),U=_(M);$e(U,Ze(W)),L(M),ce(4),L(h),y(I,h),le()}export{pt as component};
