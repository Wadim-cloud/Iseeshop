import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as n,o as i,a as l}from"../chunks/9BOlcS-b.js";import{t as m,a as p}from"../chunks/Bnw62dMu.js";import{i as g}from"../chunks/xvq0-Hdq.js";import{s as k}from"../chunks/BeMxMaC5.js";import{g as t}from"../chunks/zThV1SCZ.js";var f=m("<div>Authenticating...</div>");function _(r,s){n(s,!1),i(async()=>{console.log("Auth callback mounted");const{data:{session:e},error:o}=await k.auth.getSession();if(console.log("Callback session:",e,"Error:",o),o){console.error("Callback error:",o.message),t("/",{replaceState:!0});return}if(e){document.cookie=`sb-access-token=${e.access_token}; Path=/; SameSite=Lax; Max-Age=31536000`,document.cookie=`sb-refresh-token=${e.refresh_token}; Path=/; SameSite=Lax; Max-Age=31536000`,console.log("Cookies set in callback:",{accessToken:!!e.access_token,refreshToken:!!e.refresh_token});const a=localStorage.getItem("sb-redirect")||"/";localStorage.removeItem("sb-redirect"),console.log("Redirecting from callback:",a),t(a,{replaceState:!0})}else t("/",{replaceState:!0})}),g();var c=f();p(r,c),l()}export{_ as component};
