import{c as be,a as n,t as u}from"../chunks/fM_HHR7z.js";import{i as oe}from"../chunks/Dcs68N15.js";import{p as se,ax as _e,ap as ie,a as re,as as h,ar as l,at as p,o as ye,aw as Se,A as r,I as g,x as o,aq as Ie,w as Ae}from"../chunks/Cw_GAJ-8.js";import{e as T,h as ke}from"../chunks/tsz7uQk5.js";import{i as f}from"../chunks/JX9NnDbc.js";import{s as y}from"../chunks/B3wL8fD2.js";import{t as C,f as G,a as we}from"../chunks/Dpaq57WD.js";import{s as Ce,a as Te}from"../chunks/BbjLjIkL.js";import{p as qe}from"../chunks/CvU7rG2n.js";import{C as Pe}from"../chunks/D3vPkYQk.js";import{p as $e}from"../chunks/DaUur2Kz.js";import{s as N}from"../chunks/CI_hdHvm.js";import{g as M,i as ae}from"../chunks/BsK15QRw.js";var Re=u('<div class="modal-overlay svelte-1q5ot2i"><div class="modal svelte-1q5ot2i"><button class="close-button svelte-1q5ot2i">Ã—</button> <h2 class="svelte-1q5ot2i">Sign In</h2> <div class="provider-buttons svelte-1q5ot2i"><button class="provider-button google svelte-1q5ot2i">Sign in with Google</button> <button class="provider-button github svelte-1q5ot2i">Sign in with GitHub</button></div></div></div>');function Ee(U,q){se(q,!1);let P=$e(q,"show",12);const $=_e();async function R(c){console.log("Initiating OAuth with:",c);try{const{error:s}=await N.auth.signInWithOAuth({provider:c,options:{redirectTo:`${window.location.origin}/auth/callback`}});if(s)throw console.error("OAuth error:",s.message),s;console.log("OAuth initiated successfully"),$("authSuccess")}catch(s){console.error("OAuth failed:",s),$("authError",{message:s instanceof Error?s.message:"Authentication failed"})}}oe();var v=be(),S=ie(v);{var x=c=>{var s=Re(),b=h(s),_=h(b),I=l(_,4),A=h(I),E=l(A,2);p(I),p(b),p(s),T("click",_,()=>P(!1)),T("click",A,()=>R("google")),T("click",E,()=>R("github")),n(c,s)};f(S,c=>{P()&&c(x)})}n(U,v),re()}var Oe=u('<meta name="description" content="A collaborative creative platform" class="svelte-1xx204v">'),Ve=u('<div class="container cinematic-loader svelte-1xx204v" role="status" aria-live="polite"><div class="overlay svelte-1xx204v"></div> <div class="loading-content svelte-1xx204v"><img src="/logo192.png" alt="Pexos Logo" class="logo-image floating svelte-1xx204v"> <p class="loading-text floating svelte-1xx204v">Loading Pexos...</p></div></div>'),Le=u('<div class="svelte-1xx204v"><img src="/logo192.png" alt="Pexos Logo" class="logo-image svelte-1xx204v"></div>'),De=u('<div class="svelte-1xx204v"><h1 class="svelte-1xx204v">Pexos</h1></div>'),Ge=u('<div class="svelte-1xx204v"><p class="svelte-1xx204v">A collaborative creative platform</p></div>'),Ue=u('<div class="headline-container svelte-1xx204v"><h2 class="main-headline svelte-1xx204v">Create Drawings, Plot them, Sell them, Solve Community Challenges</h2></div>'),Me=u('<div class="svelte-1xx204v"><button class="login-button svelte-1xx204v">Sign In</button></div>'),Ne=u('<div class="container cinematic-container svelte-1xx204v"><div><!></div> <div></div> <div></div> <div></div> <div></div> <div class="content cinematic-content svelte-1xx204v"><!> <!> <div></div> <!> <!> <!></div></div>'),We=u("<!> <!>",1);function at(U,q){se(q,!1);const[P,$]=Ce(),R=()=>Te(qe,"$page",P);let v=g(!1),S=g(!0),x=g(null),c=g(!1),s=g(!1),b=g(!1),_=g(!1),I=g(!1),A=g(!1);ye(async()=>{console.log("Root page mounted");try{const{data:{session:i},error:a}=await N.auth.getSession();a&&console.error("Session check error:",a.message),r(x,i),setTimeout(()=>{r(S,!1),setTimeout(()=>r(c,!0),300),setTimeout(()=>r(s,!0),800),setTimeout(()=>r(b,!0),1300),setTimeout(()=>r(_,!0),1800),setTimeout(()=>r(I,!0),2200),setTimeout(()=>r(A,!0),2800)},1e3);const d=R().url.searchParams.get("redirect");d&&(console.log("Redirect param:",d),localStorage.setItem("sb-redirect",decodeURIComponent(d)),o(x)?(console.log("User already signed in, redirecting to:",d),M(decodeURIComponent(d),{replaceState:!0})):r(v,!0));const{data:O}=N.auth.onAuthStateChange(async(V,m)=>{var k;if(console.log("Auth state changed:",V,(k=m==null?void 0:m.user)==null?void 0:k.email),r(x,m),V==="SIGNED_IN"&&m){await ae();const w=localStorage.getItem("sb-redirect")||"/";localStorage.removeItem("sb-redirect"),console.log("Redirecting after sign-in:",w),M(w,{replaceState:!0})}});return()=>O.subscription.unsubscribe()}catch(i){console.error("Session check failed:",i),r(S,!1)}});const E=()=>{console.log("Sign In button clicked"),r(v,!0)};oe();var W=We();ke(i=>{var a=Oe();Se.title="Pexos - Creative Platform",n(i,a)});var z=ie(W);{var le=i=>{var a=Ve();n(i,a)},ne=i=>{var a=Ne(),d=h(a);let O;var V=h(d);Pe(V,{}),p(d);var m=l(d,2);let k;var w=l(m,2);let H;var j=l(w,2);let B;var F=l(j,2);let J;var K=l(F,2),Q=h(K);{var de=e=>{var t=Le();C(1,t,()=>G,()=>({y:30,duration:1e3})),n(e,t)};f(Q,e=>{o(b)&&e(de)})}var X=l(Q,2);{var ue=e=>{var t=De();C(1,t,()=>G,()=>({y:30,duration:1e3,delay:200})),n(e,t)};f(X,e=>{o(b)&&e(ue)})}var Y=l(X,2);let Z;var ee=l(Y,2);{var ge=e=>{var t=Ge();C(1,t,()=>G,()=>({y:20,duration:800,delay:300})),n(e,t)};f(ee,e=>{o(_)&&e(ge)})}var te=l(ee,2);{var me=e=>{var t=Ue();C(1,t,()=>G,()=>({y:20,duration:800,delay:300})),n(e,t)};f(te,e=>{o(I)&&e(me)})}var fe=l(te,2);{var he=e=>{var t=Me(),L=h(t);p(t),T("click",L,E),T("keydown",L,D=>(D.key==="Enter"||D.key==="Space")&&E()),C(1,t,()=>we,()=>({duration:800,delay:200})),n(e,t)};f(fe,e=>{!o(v)&&!o(x)&&o(A)&&e(he)})}p(K),p(a),Ie((e,t,L,D,pe,xe)=>{O=y(d,1,"shader-background svelte-1xx204v",null,O,e),k=y(m,1,"cinematic-overlay svelte-1xx204v",null,k,t),H=y(w,1,"bg-element top-right svelte-1xx204v",null,H,L),B=y(j,1,"bg-element bottom-left svelte-1xx204v",null,B,D),J=y(F,1,"bg-element center-lines svelte-1xx204v",null,J,pe),Z=y(Y,1,"horizontal-bar svelte-1xx204v",null,Z,xe)},[()=>({active:o(c)}),()=>({"fade-out":o(c)}),()=>({visible:o(s)}),()=>({visible:o(s)}),()=>({visible:o(s)}),()=>({animate:o(_)})],Ae),n(i,a)};f(z,i=>{o(S)?i(le):i(ne,!1)})}var ve=l(z,2);{var ce=i=>{Ee(i,{get show(){return o(v)},set show(a){r(v,a)},$$events:{authSuccess:async()=>{console.log("Auth success event"),await ae();const a=localStorage.getItem("sb-redirect")||"/";localStorage.removeItem("sb-redirect"),console.log("Redirecting after auth success:",a),M(a,{replaceState:!0})},authError:({detail:a})=>{console.log("Auth error:",a.message),r(v,!1)}},$$legacy:!0})};f(ve,i=>{o(v)&&i(ce)})}n(U,W),re(),$()}export{at as component};
