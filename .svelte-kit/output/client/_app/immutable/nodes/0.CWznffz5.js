var vt=t=>{throw TypeError(t)};var He=(t,e,r)=>e.has(t)||vt("Cannot "+r);var h=(t,e,r)=>(He(t,e,"read from private field"),r?r.call(t):e.get(t)),N=(t,e,r)=>e.has(t)?vt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),B=(t,e,r,n)=>(He(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ne=(t,e,r)=>(He(t,e,"access private method"),r);import"../chunks/CWj6FrbW.js";import{aq as J,h as Qe,c as ht,Y as Zt,aV as $t,j as Ze,a8 as er,aR as tr,aQ as rr,s as nr,T as Me,b as ar,E as or,g as ir,O as sr,a6 as cr,A as S,aW as lr,x as d,a0 as ur,m as dr,u as fr,aM as mr,p as ze,G as ce,an as gt,ak as vr,ao as hr,ap as Z,at as F,w as Ie,au as L,ar as b,a as Ae,aL as nt,z as gr,aN as We,aX as pr,ag as U,o as Rt,az as _r}from"../chunks/CgpLTG9e.js";import{e as A,s as Ke,o as fe,h as Ct}from"../chunks/C_m-qMmZ.js";import{d as pt,e as wr,t as R,a as E,c as Mt,f as yr}from"../chunks/CVxkZOGS.js";import{i as Y}from"../chunks/ClXQIVwo.js";import{a as we,s as It}from"../chunks/CN5En7F1.js";import{a as br,s as xe,c as _t}from"../chunks/BX0sDDBR.js";import"../chunks/69_IOA4Y.js";import{e as Ne,i as Sr}from"../chunks/B6FZq7_G.js";import{s as at}from"../chunks/CvOifuop.js";import{s as Ue}from"../chunks/CZQXRoan.js";import{i as Er}from"../chunks/CKI-jMsq.js";import{p as P}from"../chunks/Bxv1m9ax.js";import{g as _e,i as Tr}from"../chunks/DVI0icdo.js";import{w as $e,d as Je}from"../chunks/4hlrb4d8.js";import{A as kr}from"../chunks/vL3NiHFz.js";import{n as zr,m as Ar}from"../chunks/BrdWLhS6.js";function Rr(t,e,r=!1,n=!1,o=!1){var l=t,u="";J(()=>{var f=Zt;if(u===(u=e()??"")){Qe&&ht();return}if(f.nodes_start!==null&&($t(f.nodes_start,f.nodes_end),f.nodes_start=f.nodes_end=null),u!==""){if(Qe){Ze.data;for(var m=ht(),g=m;m!==null&&(m.nodeType!==8||m.data!=="");)g=m,m=er(m);if(m===null)throw tr(),rr;pt(Ze,g),l=nr(m);return}var p=u+"";r?p=`<svg>${p}</svg>`:n&&(p=`<math>${p}</math>`);var T=wr(p);if((r||n)&&(T=Me(T)),pt(Me(T),T.lastChild),r||n)for(;Me(T);)l.before(Me(T));else l.before(T)}})}function Cr(t,e,...r){var n=t,o=sr,l;ar(()=>{o!==(o=e())&&(l&&(cr(l),l=null),l=ir(()=>o(n,...r)))},or),Qe&&(n=Ze)}function Mr(t){S(t,t.v+1)}function De(t){let e=0,r=ur(0),n;return()=>{lr()&&(d(r),dr(()=>(e===0&&(n=fr(()=>t(()=>Mr(r)))),e+=1,()=>{mr().then(()=>{e-=1,e===0&&(n==null||n(),n=void 0)})})))}}var Ir=R("<div></div>"),Nr=R("<div></div>"),xr=R("<div></div>"),Br=R('<span class="badge svelte-12fzeem"> </span>'),Lr=R('<div class="menu-block svelte-12fzeem" title="Notifications">üîî <!></div> <div class="menu-block logout svelte-12fzeem" title="Logout"></div> <div class="menu-block avatar svelte-12fzeem" title="Profile"><div class="avatar-container svelte-12fzeem"><img alt="avatar" class="avatar-image svelte-12fzeem"></div></div>',1),Pr=R('<div class="menu-block login svelte-12fzeem" title="Login"></div> <div class="menu-block about svelte-12fzeem" title="About"></div>',1),Or=R('<div class="notification-item svelte-12fzeem"><div class="notif-header svelte-12fzeem"><span class="notif-icon svelte-12fzeem">üñºÔ∏è</span> <span class="notif-message svelte-12fzeem"> </span></div> <div class="notif-time svelte-12fzeem"> </div></div>'),jr=R('<div class="notification-item svelte-12fzeem">No notifications</div>'),Gr=R('<div class="notifications-popup svelte-12fzeem"><!> <!></div>'),Wr=R('<div class="navbar-row svelte-12fzeem"><div class="navbar svelte-12fzeem"></div> <div class="label-box svelte-12fzeem">Create</div> <div class="navbar svelte-12fzeem"></div> <div class="label-box svelte-12fzeem">List</div> <div class="label-box svelte-12fzeem">Gallery</div> <div class="navbar svelte-12fzeem"></div> <div class="menu-bar svelte-12fzeem"><!></div></div> <!> <!>',1);function Dr(t,e){ze(e,!1);const[r,n]=It(),o=()=>we(p,"$user",r),l=()=>we(zr,"$notificationStore",r),u=()=>we(T,"$avatarUrl",r);let f=P(e,"session",8),m=P(e,"onAuthToggle",8);const g=$e(f()),p=Je(g,a=>(a==null?void 0:a.user)||null),T=Je(p,a=>{var c;return((c=a==null?void 0:a.user_metadata)==null?void 0:c.avatar_url)||"/default-avatar.png"});Je(p,a=>{var c,v;return((c=a==null?void 0:a.user_metadata)==null?void 0:c.full_name)||((v=a==null?void 0:a.email)==null?void 0:v.split("@")[0])||"User"});let O=ce(!1),j=ce(!1),s=ce([]);async function i(){const a=await br();if(!a)return;const{data:c,error:v}=await xe.from("notifications").select("id, message, drawing_id, sent, created_at").eq("user_id",a.id).order("created_at",{ascending:!1});!v&&c&&S(s,c)}async function _(a){await Ar(a.user_id,[a.id]),a.drawing_id&&_e(`/gallery/${a.drawing_id}`)}function X(){S(O,!0)}const z=10,me=5;function Fe(){return Array(50).fill(null).map((a,c)=>({id:c,isBlack:!1,isBlue:!1,isRed:!1,navigateTo:null}))}let $=ce(Fe()),ee=ce(Fe()),te=ce(Fe()),Gt=[],Wt=[],Dt=[];function st(){alert("Please log in to access this feature."),X()}function Ve(a,c,v){const w=a.currentTarget.getBoundingClientRect(),C=a.clientX-w.left,M=a.clientY-w.top,K=200/z,re=50/me,G=Math.floor(C/K),W=Math.floor(M/re),q=W*z+G;let x=c.map(I=>({...I,isBlue:!1}));const Ce=x.map((I,D)=>{const Ut=Math.floor(D/z),Jt=D%z,Qt=Math.sqrt((Jt-G)**2+(Ut-W)**2);return{index:D,distance:Qt}});Ce.sort((I,D)=>I.distance-D.distance);const Kt=Ce.slice(0,3).map(I=>I.index);x=x.map((I,D)=>({...I,isBlue:Kt.includes(D)&&!I.isBlack})),q>=0&&q<x.length&&!x[q].isBlack&&setTimeout(()=>{x=x.map((I,D)=>({...I,isRed:D===q&&!I.isBlack})),v([...x]),setTimeout(()=>{x=x.map((I,D)=>({...I,isRed:D===q?!1:I.isRed})),v([...x])},500)},100),v([...x])}function Xe(a,c,v,y){if(!o()){st();return}if(y.length<2&&!c[a].isBlack){const w=c.map((C,M)=>({...C,isBlack:M===a?!0:C.isBlack,isBlue:M===a?!1:C.isBlue,isRed:M===a?!1:C.isRed}));y.push(a),y.length===1?w[a].navigateTo="/create":y.length===2&&(w[a].navigateTo="/gallery"),v([...w])}else c[a].isBlack&&c[a].navigateTo&&_e(c[a].navigateTo)}function qe(a,c){a(c.map(v=>({...v,isBlue:!1,isRed:!1})))}function ve(a){o()?_e(a):st()}gt(()=>vr(f()),()=>{g.set(f())}),gt(()=>d(j),()=>{d(j)&&i()}),hr(),Er();var ct=Wr(),Ye=Z(ct),he=F(Ye);Ne(he,5,()=>d($),a=>a.id,(a,c)=>{var v=Ir();let y;J(w=>y=Ue(v,1,"block svelte-12fzeem",null,y,w),[()=>({black:d(c).isBlack,blue:d(c).isBlue,red:d(c).isRed})],Ie),A("click",v,()=>Xe(d(c).id,d($),w=>S($,w),Gt)),E(a,v)}),L(he);var lt=b(he,2),ge=b(lt,2);Ne(ge,5,()=>d(ee),a=>a.id,(a,c)=>{var v=Nr();let y;J(w=>y=Ue(v,1,"block svelte-12fzeem",null,y,w),[()=>({black:d(c).isBlack,"alt-blue":d(c).isBlue,"alt-red":d(c).isRed})],Ie),A("click",v,()=>Xe(d(c).id,d(ee),w=>S(ee,w),Wt)),E(a,v)}),L(ge);var ut=b(ge,2),dt=b(ut,2),pe=b(dt,2);Ne(pe,5,()=>d(te),a=>a.id,(a,c)=>{var v=xr();let y;J(w=>y=Ue(v,1,"block svelte-12fzeem",null,y,w),[()=>({black:d(c).isBlack,"alt2-blue":d(c).isBlue,"alt2-red":d(c).isRed})],Ie),A("click",v,()=>Xe(d(c).id,d(te),w=>S(te,w),Dt)),E(a,v)}),L(pe);var ft=b(pe,2),Ft=F(ft);{var Vt=a=>{var c=Lr(),v=Z(c),y=b(F(v));{var w=G=>{var W=Br(),q=F(W,!0);L(W),J(()=>Ke(q,l().unreadCount)),E(G,W)};Y(y,G=>{l().unreadCount>0&&G(w)})}L(v);var C=b(v,2),M=b(C,2),K=F(M),re=F(K);L(K),L(M),J(()=>at(re,"src",u())),A("click",v,()=>S(j,!d(j))),A("click",C,function(...G){var W;(W=m())==null||W.apply(this,G)}),A("click",M,()=>ve("/settings")),E(a,c)},Xt=a=>{var c=Pr(),v=Z(c),y=b(v,2);A("click",v,X),A("click",y,()=>ve("/about")),E(a,c)};Y(Ft,a=>{o()?a(Vt):a(Xt,!1)})}L(ft),L(Ye);var mt=b(Ye,2);{var qt=a=>{var c=Gr(),v=F(c);Ne(v,1,()=>d(s),Sr,(C,M)=>{var K=Or(),re=F(K),G=b(F(re),2),W=F(G,!0);L(G),L(re);var q=b(re,2),x=F(q,!0);L(q),L(K),J(Ce=>{Ke(W,d(M).message),Ke(x,Ce)},[()=>new Date(d(M).created_at).toLocaleString()],Ie),A("click",K,()=>_(d(M))),E(C,K)});var y=b(v,2);{var w=C=>{var M=jr();E(C,M)};Y(y,C=>{d(s).length===0&&C(w)})}L(c),E(a,c)};Y(mt,a=>{d(j)&&a(qt)})}var Yt=b(mt,2);{var Ht=a=>{kr(a,{get show(){return d(O)},set show(c){S(O,c)},$$events:{authSuccess:async()=>{await Tr();const c=localStorage.getItem("sb-redirect")||"/";localStorage.removeItem("sb-redirect"),_e(c,{replaceState:!0})},authError:()=>{S(O,!1)}},$$legacy:!0})};Y(Yt,a=>{d(O)&&a(Ht)})}A("mousemove",he,a=>Ve(a,d($),c=>S($,c))),A("mouseleave",he,()=>qe(a=>S($,a),d($))),A("click",lt,()=>ve("/create")),A("mousemove",ge,a=>Ve(a,d(ee),c=>S(ee,c))),A("mouseleave",ge,()=>qe(a=>S(ee,a),d(ee))),A("click",ut,()=>ve("/todo")),A("click",dt,()=>ve("/gallery")),A("mousemove",pe,a=>Ve(a,d(te),c=>S(te,c))),A("mouseleave",pe,()=>qe(a=>S(te,a),d(te))),E(t,ct),Ae(),n()}function Fr(t){return typeof t=="function"}function Vr(t){return t!==null&&typeof t=="object"}const ye=Symbol("box"),ot=Symbol("is-writable");function Xr(t){return Vr(t)&&ye in t}function qr(t){return k.isBox(t)&&ot in t}function k(t){let e=nt(gr(t));return{[ye]:!0,[ot]:!0,get current(){return d(e)},set current(r){S(e,r,!0)}}}function Yr(t,e){const r=We(t);return e?{[ye]:!0,[ot]:!0,get current(){return d(r)},set current(n){e(n)}}:{[ye]:!0,get current(){return t()}}}function Hr(t){return k.isBox(t)?t:Fr(t)?k.with(t):k(t)}function Kr(t){return Object.entries(t).reduce((e,[r,n])=>k.isBox(n)?(k.isWritableBox(n)?Object.defineProperty(e,r,{get(){return n.current},set(o){n.current=o}}):Object.defineProperty(e,r,{get(){return n.current}}),e):Object.assign(e,{[r]:n}),{})}function Ur(t){return k.isWritableBox(t)?{[ye]:!0,get current(){return t.current}}:t}k.from=Hr;k.with=Yr;k.flatten=Kr;k.readonly=Ur;k.isBox=Xr;k.isWritableBox=qr;var Nt={},wt=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Jr=/\n/g,Qr=/^\s*/,Zr=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,$r=/^:\s*/,en=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,tn=/^[;\s]*/,rn=/^\s+|\s+$/g,nn=`
`,yt="/",bt="*",ae="",an="comment",on="declaration",sn=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var r=1,n=1;function o(s){var i=s.match(Jr);i&&(r+=i.length);var _=s.lastIndexOf(nn);n=~_?s.length-_:n+s.length}function l(){var s={line:r,column:n};return function(i){return i.position=new u(s),g(),i}}function u(s){this.start=s,this.end={line:r,column:n},this.source=e.source}u.prototype.content=t;function f(s){var i=new Error(e.source+":"+r+":"+n+": "+s);if(i.reason=s,i.filename=e.source,i.line=r,i.column=n,i.source=t,!e.silent)throw i}function m(s){var i=s.exec(t);if(i){var _=i[0];return o(_),t=t.slice(_.length),i}}function g(){m(Qr)}function p(s){var i;for(s=s||[];i=T();)i!==!1&&s.push(i);return s}function T(){var s=l();if(!(yt!=t.charAt(0)||bt!=t.charAt(1))){for(var i=2;ae!=t.charAt(i)&&(bt!=t.charAt(i)||yt!=t.charAt(i+1));)++i;if(i+=2,ae===t.charAt(i-1))return f("End of comment missing");var _=t.slice(2,i-2);return n+=2,o(_),t=t.slice(i),n+=2,s({type:an,comment:_})}}function O(){var s=l(),i=m(Zr);if(i){if(T(),!m($r))return f("property missing ':'");var _=m(en),X=s({type:on,property:St(i[0].replace(wt,ae)),value:_?St(_[0].replace(wt,ae)):ae});return m(tn),X}}function j(){var s=[];p(s);for(var i;i=O();)i!==!1&&(s.push(i),p(s));return s}return g(),j()};function St(t){return t?t.replace(rn,ae):ae}var cn=_t&&_t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nt,"__esModule",{value:!0});var Et=Nt.default=un,ln=cn(sn);function un(t,e){var r=null;if(!t||typeof t!="string")return r;var n=(0,ln.default)(t),o=typeof e=="function";return n.forEach(function(l){if(l.type==="declaration"){var u=l.property,f=l.value;o?e(u,f,l):f&&(r=r||{},r[u]=f)}}),r}Et.default;function dn(t,e){const r=RegExp(t,"g");return n=>{if(typeof n!="string")throw new TypeError(`expected an argument of type string, but got ${typeof n}`);return n.match(r)?n.replace(r,e):n}}const fn=dn(/[A-Z]/,t=>`-${t.toLowerCase()}`);function mn(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected an argument of type object, but got ${typeof t}`);return Object.keys(t).map(e=>`${fn(e)}: ${t[e]};`).join(`
`)}function vn(t={}){return mn(t).replace(`
`," ")}const hn={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};vn(hn);const gn=typeof window<"u"?window:void 0;function pn(t){let e=t.activeElement;for(;e!=null&&e.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}var be,Se;class _n{constructor(e,r){N(this,be);N(this,Se);B(this,be,e),B(this,Se,De(r))}get current(){return h(this,Se).call(this),h(this,be).call(this)}}be=new WeakMap,Se=new WeakMap;const wn=/\(.+\)/;class yn extends _n{constructor(e,r){let n=wn.test(e)?e:`(${e})`;const o=window.matchMedia(n);super(()=>o.matches,l=>fe(o,"change",l))}}var le,Ee,At;let bn=(At=class{constructor(e={}){N(this,le);N(this,Ee);const{window:r=gn,document:n=r==null?void 0:r.document}=e;r!==void 0&&(B(this,le,n),B(this,Ee,De(o=>{const l=fe(r,"focusin",o),u=fe(r,"focusout",o);return()=>{l(),u()}})))}get current(){var e;return(e=h(this,Ee))==null||e.call(this),h(this,le)?pn(h(this,le)):null}},le=new WeakMap,Ee=new WeakMap,At);new bn;function Tt(t){return t.filter(e=>e.length>0)}const xt={getItem:t=>null,setItem:(t,e)=>{}},Re=typeof document<"u",Sn=["dark","light","system"];function et(t){return typeof t!="string"?!1:Sn.includes(t)}const Bt=typeof window<"u"?window:void 0;function En(t){let e=t.activeElement;for(;e!=null&&e.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}var ue,Te;class Tn{constructor(e={}){N(this,ue);N(this,Te);const{window:r=Bt,document:n=r==null?void 0:r.document}=e;r!==void 0&&(B(this,ue,n),B(this,Te,De(o=>{const l=fe(r,"focusin",o),u=fe(r,"focusout",o);return()=>{l(),u()}})))}get current(){var e;return(e=h(this,Te))==null||e.call(this),h(this,ue)?En(h(this,ue)):null}}ue=new WeakMap,Te=new WeakMap;new Tn;function kn(t,e){switch(t){case"local":return e.localStorage;case"session":return e.sessionStorage}}var ie,Q,de,se,ke,V,Ge,H,Be,Le;class Lt{constructor(e,r,n={}){N(this,H);N(this,ie);N(this,Q);N(this,de);N(this,se);N(this,ke);N(this,V,nt(0));N(this,Ge,e=>{e.key!==h(this,Q)||e.newValue===null||(B(this,ie,ne(this,H,Be).call(this,e.newValue)),S(h(this,V),d(h(this,V))+1))});const{storage:o="local",serializer:l={serialize:JSON.stringify,deserialize:JSON.parse},syncTabs:u=!0,window:f=Bt}=n;if(B(this,ie,r),B(this,Q,e),B(this,de,l),f===void 0)return;const m=kn(o,f);B(this,se,m);const g=m.getItem(e);g!==null?B(this,ie,ne(this,H,Be).call(this,g)):ne(this,H,Le).call(this,r),u&&o==="local"&&B(this,ke,De(()=>fe(f,"storage",h(this,Ge))))}get current(){var o,l;(o=h(this,ke))==null||o.call(this),d(h(this,V));const e=ne(this,H,Be).call(this,(l=h(this,se))==null?void 0:l.getItem(h(this,Q)))??h(this,ie),r=new WeakMap,n=u=>{if(u===null||(u==null?void 0:u.constructor.name)==="Date"||typeof u!="object")return u;let f=r.get(u);return f||(f=new Proxy(u,{get:(m,g)=>(d(h(this,V)),n(Reflect.get(m,g))),set:(m,g,p)=>(S(h(this,V),d(h(this,V))+1),Reflect.set(m,g,p),ne(this,H,Le).call(this,e),!0)}),r.set(u,f)),f};return n(e)}set current(e){ne(this,H,Le).call(this,e),S(h(this,V),d(h(this,V))+1)}}ie=new WeakMap,Q=new WeakMap,de=new WeakMap,se=new WeakMap,ke=new WeakMap,V=new WeakMap,Ge=new WeakMap,H=new WeakSet,Be=function(e){try{return h(this,de).deserialize(e)}catch(r){console.error(`Error when parsing "${e}" from persisted store "${h(this,Q)}"`,r);return}},Le=function(e){var r;try{e!=null&&((r=h(this,se))==null||r.setItem(h(this,Q),h(this,de).serialize(e)))}catch(n){console.error(`Error when writing value from persisted store "${h(this,Q)}" to ${h(this,se)}`,n)}};let kt,zt;function Pt(t){if(typeof document>"u")return;clearTimeout(kt),clearTimeout(zt);const e=document.createElement("style"),r=document.createTextNode(`* {
     -webkit-transition: none !important;
     -moz-transition: none !important;
     -o-transition: none !important;
     -ms-transition: none !important;
     transition: none !important;
  }`);e.appendChild(r);const n=()=>document.head.appendChild(e),o=()=>document.head.removeChild(e);if(typeof window.getComputedStyle<"u"){n(),t(),window.getComputedStyle(e).opacity,o();return}if(typeof window.requestAnimationFrame<"u"){n(),t(),window.requestAnimationFrame(o);return}n(),kt=window.setTimeout(()=>{t(),zt=window.setTimeout(o,120)},120)}const Oe=k("mode-watcher-mode"),je=k("mode-watcher-theme"),tt=zn(),rt=Rn(),oe=k(void 0),Pe=An(),it=k(!0),Ot=k([]),jt=k([]);function zn(){const t="system",r=(Re?localStorage:xt).getItem(Oe.current),n=et(r)?r:t;return new Lt(Oe.current,n,{serializer:{serialize:o=>o,deserialize:o=>et(o)?o:t}})}function An(){const e=(Re?localStorage:xt).getItem(je.current),r=e??"";return new Lt(je.current,r,{serializer:{serialize:n=>typeof n!="string"?"":n,deserialize:n=>n}})}function Rn(){let e=!0,r=nt(void 0);function n(){Re&&S(r,l.current?"light":"dark",!0)}function o(u){e=u}const l=typeof window<"u"&&"matchMedia"in window?new yn("prefers-color-scheme: light"):{current:!1};return pr(()=>{U(()=>{e&&n()})}),{get current(){return d(r)},query:n,tracking:o}}function Cn(){const t=We(()=>{if(!Re)return;const e=tt.current==="system"?rt.current:tt.current,r=Tt(Ot.current),n=Tt(jt.current);function o(){const l=document.documentElement,u=document.querySelector('meta[name="theme-color"]');e==="light"?(r.length&&l.classList.remove(...r),n.length&&l.classList.add(...n),l.style.colorScheme="light",u&&oe.current&&u.setAttribute("content",oe.current.light)):(n.length&&l.classList.remove(...n),r.length&&l.classList.add(...r),l.style.colorScheme="dark",u&&oe.current&&u.setAttribute("content",oe.current.dark))}return it.current?Pt(o):o(),e});return{get current(){return d(t)}}}function Mn(){const t=We(()=>{if(Pe.current,!Re)return;function e(){document.documentElement.setAttribute("data-theme",Pe.current)}return it.current?Pt(e):e(),Pe.current});return{get current(){return d(t)}}}const In=Cn(),Nn=Mn();function xn(t){tt.current=t}function Bn(t){Pe.current=t}function Ln({defaultMode:t="system",themeColors:e,darkClassNames:r=["dark"],lightClassNames:n=[],defaultTheme:o="",modeStorageKey:l="mode-watcher-mode",themeStorageKey:u="mode-watcher-theme"}){const f=document.documentElement,m=localStorage.getItem(l)??t,g=localStorage.getItem(u)??o,p=m==="light"||m==="system"&&window.matchMedia("(prefers-color-scheme: light)").matches;if(p?(r.length&&f.classList.remove(...r),n.length&&f.classList.add(...n)):(n.length&&f.classList.remove(...n),r.length&&f.classList.add(...r)),f.style.colorScheme=p?"light":"dark",e){const T=document.querySelector('meta[name="theme-color"]');T&&T.setAttribute("content",m==="light"?e.light:e.dark)}g&&(f.setAttribute("data-theme",g),localStorage.setItem(u,g)),localStorage.setItem(l,m)}var Pn=R('<meta name="theme-color">');function On(t,e){ze(e,!0);var r=Mt(),n=Z(r);{var o=l=>{var u=Pn();J(()=>at(u,"content",e.themeColors.dark)),E(l,u)};Y(n,l=>{e.themeColors&&l(o)})}E(t,r),Ae()}var jn=R('<meta name="theme-color">'),Gn=R("<!> <!>",1);function Wn(t,e){ze(e,!0);let r=P(e,"trueNonce",3,"");Ct(n=>{var o=Gn(),l=Z(o);{var u=m=>{var g=jn();J(()=>at(g,"content",e.themeColors.dark)),E(m,g)};Y(l,m=>{e.themeColors&&m(u)})}var f=b(l,2);Rr(f,()=>`<script${r()?` nonce=${r()}`:""}>(`+Ln.toString()+")("+JSON.stringify(e.initConfig)+");<\/script>"),E(n,o)}),Ae()}function Dn(t,e){ze(e,!0);let r=P(e,"track",3,!0),n=P(e,"defaultMode",3,"system"),o=P(e,"disableTransitions",3,!0),l=P(e,"darkClassNames",19,()=>["dark"]),u=P(e,"lightClassNames",19,()=>[]),f=P(e,"defaultTheme",3,""),m=P(e,"nonce",3,""),g=P(e,"themeStorageKey",3,"mode-watcher-theme"),p=P(e,"modeStorageKey",3,"mode-watcher-mode"),T=P(e,"disableHeadScriptInjection",3,!1);U(()=>{it.current=o()}),U(()=>{oe.current=e.themeColors}),U(()=>{Ot.current=l()}),U(()=>{jt.current=u()}),U(()=>{Oe.current=p()}),U(()=>{je.current=g()}),U(()=>{In.current}),U(()=>{Nn.current}),Rt(()=>{rt.tracking(r()),rt.query();const z=localStorage.getItem(Oe.current);xn(et(z)?z:n());const me=localStorage.getItem(je.current);Bn(me||f())});const O={defaultMode:n(),themeColors:e.themeColors,darkClassNames:l(),lightClassNames:u(),defaultTheme:f(),modeStorageKey:p(),themeStorageKey:g()},j=We(()=>typeof window>"u"?m():"");var s=Mt(),i=Z(s);{var _=z=>{On(z,{get themeColors(){return oe.current}})},X=z=>{Wn(z,{get trueNonce(){return d(j)},initConfig:O,get themeColors(){return oe.current}})};Y(i,z=>{T()?z(_):z(X,!1)})}E(t,s),Ae()}var Fn=yr(`<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-TVHZWJGB"><\/script> <script>
      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
      });
    <\/script>`,1),Vn=R('<link rel="canonical" href="https://pexos.netlify.app"> <meta name="robots" content="index, follow"> <meta name="google-site-verification" content="fP4cuGw4wrszN9kcVbzYHTB8bKj4YSxHTyZDSGOvyPk"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta property="og:title" content="Pexos, collaborative creative platform"> <meta property="og:description" content="Log in and start creating."> <meta property="og:image" content="/logo192.png"> <meta property="og:url" content="https://pexos.netlify.app"> <meta property="og:type" content="website"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:title" content="Pexos, collaborative creative platform"> <meta name="twitter:description" content="Log in and start creating."> <meta name="twitter:image" content="/logo192.png"> <!>',1),Xn=R("<div>Loading...</div>"),qn=R("<!> <!>",1),Yn=R("<noscript></noscript> <!> <!>",1);function fa(t,e){ze(e,!0);const[r,n]=It(),o=()=>we(u,"$sessionStore",r),l=()=>we(f,"$loading",r);Rt(()=>{document.documentElement.setAttribute("data-theme","dark")});const u=$e(e.data.session),f=$e(!0);xe.auth.getSession().then(({data:{session:s},error:i})=>{console.log("Client session loaded at:",new Date().toISOString()),i&&console.error("Session load error:",i.message),u.set(s||e.data.session),f.set(!1)}).catch(s=>{console.error("Session load error:",s),u.set(e.data.session||null),f.set(!1)}),xe.auth.onAuthStateChange((s,i)=>{var _;console.log("Auth state changed:",s,(_=i==null?void 0:i.user)==null?void 0:_.email),u.set(i),s==="SIGNED_OUT"&&window.location.pathname!=="/"&&(console.log("User signed out, redirecting to /"),_e("/",{replaceState:!0}))});async function m(){if(o()){console.log("Initiating sign out"),f.set(!0);try{const{error:s}=await xe.auth.signOut();if(s)throw s;console.log("Signed out successfully")}catch(s){console.error("Sign out failed:",s)}finally{f.set(!1)}}}var g=Yn();Ct(s=>{var i=Vn(),_=b(Z(i),26);{var X=z=>{var me=Fn();_r(2),E(z,me)};Y(_,z=>{z(X)})}E(s,i)});var p=b(Z(g),2);Dn(p,{default:"light",themeColors:{light:"#f0f0f0",dark:"#1a1a1a"},disableTransitions:!0});var T=b(p,2);{var O=s=>{var i=Xn();E(s,i)},j=s=>{var i=qn(),_=Z(i);Dr(_,{get session(){return o()},onAuthToggle:m});var X=b(_,2);Cr(X,()=>e.children),E(s,i)};Y(T,s=>{l()?s(O):s(j,!1)})}E(t,g),Ae(),n()}export{fa as component};
