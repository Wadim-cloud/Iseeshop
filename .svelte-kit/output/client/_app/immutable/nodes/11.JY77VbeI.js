import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{an as Y,ar as a,as as e,ao as j,w as Z,p as ns,o as ls,ay as vs,al as cs,am as ps,a as fs,ap as c,A as b,G as y,x as s,az as ms}from"../chunks/9BOlcS-b.js";import{s as d,e as X}from"../chunks/BsZz1DC-.js";import{i as S}from"../chunks/WEOj8Vpi.js";import{e as gs,i as us}from"../chunks/DhNq3B23.js";import{c as _s,a as p,t as u}from"../chunks/Bnw62dMu.js";import{r as ds,s as I}from"../chunks/CTf98LKf.js";import{a as hs}from"../chunks/9x1-h8O0.js";import{p as xs}from"../chunks/Bfc47y5P.js";import{i as bs}from"../chunks/xvq0-Hdq.js";import{s as ys,a as Ss}from"../chunks/BR43cs2B.js";import{l as ws,s as Ts,c as Ds,n as Ns,u as Os}from"../chunks/D2rZxUgV.js";import{s as ks}from"../chunks/Cb2afnRg.js";import{t as js,f as qs}from"../chunks/BxKlmk9s.js";import{p as J}from"../chunks/Cmn9WjR9.js";var Ls=u("<div> </div>");function Ms(M,w){let z=J(w,"message",8),A=J(w,"show",8),T=J(w,"type",8,"success");var o=_s(),D=Y(o);{var f=n=>{var r=Ls();let m;var C=a(r,!0);e(r),j(G=>{m=ks(r,1,"toast svelte-1q32h6p",null,m,G),d(C,z())},[()=>({success:T()==="success",error:T()==="error"})],Z),js(3,r,()=>qs,()=>({duration:300})),p(n,r)};S(D,n=>{A()&&n(f)})}p(M,o)}var zs=u('<div class="loading svelte-1ovrh0x"><span class="spinner svelte-1ovrh0x"></span> <span>Loading...</span></div>'),As=u('<p class="alert alert-error svelte-1ovrh0x"> </p>'),Cs=u('<p class="alert alert-success svelte-1ovrh0x"> </p>'),Gs=u('<div class="toggle-group svelte-1ovrh0x"><span class="toggle-label svelte-1ovrh0x"> </span> <label class="toggle-switch svelte-1ovrh0x"><input type="checkbox" class="svelte-1ovrh0x"> <span class="slider svelte-1ovrh0x"><span class="toggle-text svelte-1ovrh0x"> </span></span></label></div>'),Ps=u('<p class="warning svelte-1ovrh0x">Disabling all notifications will stop push notifications.</p>'),Rs=u('<form class="svelte-1ovrh0x"><!> <!> <p class="role svelte-1ovrh0x">Role: <span class="svelte-1ovrh0x"> </span></p> <button type="submit" class="svelte-1ovrh0x"> </button></form>'),Bs=u('<main class="svelte-1ovrh0x"><div class="settings-card svelte-1ovrh0x"><h1 class="svelte-1ovrh0x">Notification Settings</h1> <!> <!></div></main> <!>',1);function at(M,w){ns(w,!1);const[z,A]=ys(),T=()=>Ss(Ns,"$notificationStore",z),o=y(),D=y(),f=y(),n=y(),r=y(),m=y();async function C(){console.log("handleSubmit: Submitting settings:",s(o)),await Os()}function G(t,i){console.log(`handleToggle: Toggled ${t} to ${i}`)}ls(async()=>{console.log("onMount: Loading profile and setting up notifications"),await ws(),await Ts()}),vs(()=>{console.log("onDestroy: Cleaning up subscriptions"),Ds()}),cs(()=>(s(o),s(D),s(f),s(n),s(r),s(m),T()),()=>{(t=>(b(o,t.notifications),b(D,t.role),b(f,t.loading),b(n,t.error),b(r,t.success),b(m,t.toast)))(T())}),ps(),bs();var K=Bs(),P=Y(K),Q=a(P),U=c(a(Q),2);{var $=t=>{var i=zs();p(t,i)},ss=(t,i)=>{{var q=g=>{var l=As(),h=a(l,!0);e(l),j(()=>d(h,s(n))),p(g,l)},L=(g,l)=>{{var h=N=>{var _=Cs(),R=a(_,!0);e(_),j(()=>d(R,s(r))),p(N,_)};S(g,N=>{s(r)&&N(h)},l)}};S(t,g=>{s(n)?g(q):g(L,!1)},i)}};S(U,t=>{s(f)?t($):t(ss,!1)})}var ts=c(U,2);{var as=t=>{var i=Rs(),q=a(i);gs(q,1,()=>Object.entries(s(o)),us,(O,k)=>{let v=()=>s(k)[0];var B=Gs(),E=a(B),os=a(E);e(E);var F=c(E,2),x=a(F);ds(x);var V=c(x,2),W=a(V),rs=a(W,!0);e(W),e(V),e(F),e(B),j((H,is)=>{d(os,`Notify me about ${H??""}`),I(F,"for",v()),I(x,"id",v()),I(x,"aria-label",is),d(rs,s(o)[v()]?"On":"Off")},[()=>v().replace("_"," "),()=>`Toggle notifications for ${v().replace("_"," ")}`],Z),hs(x,()=>s(o)[v()],H=>ms(o,s(o)[v()]=H)),X("change",x,()=>G(v(),s(o)[v()])),p(O,B)});var L=c(q,2);{var g=O=>{var k=Ps();p(O,k)};S(L,O=>{Object.values(s(o)).every(k=>!k)&&O(g)})}var l=c(L,2),h=c(a(l)),N=a(h,!0);e(h),e(l);var _=c(l,2),R=a(_,!0);e(_),e(i),j(()=>{d(N,s(D)||"Not set"),_.disabled=s(f),d(R,s(f)?"Saving...":"Save Settings")}),X("submit",i,xs(C)),p(t,i)};S(ts,t=>{!s(f)&&!s(n)&&t(as)})}e(Q),e(P);var es=c(P,2);Ms(es,{get message(){return s(m).message},get show(){return s(m).show},get type(){return s(m).type}}),p(M,K),fs(),A()}export{at as component};
