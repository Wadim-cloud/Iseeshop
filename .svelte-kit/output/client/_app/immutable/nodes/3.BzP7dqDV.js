import{t as it,a as J}from"../chunks/fM_HHR7z.js";import{i as Ct}from"../chunks/Dcs68N15.js";import{p as Ot,o as kt,ag as Vt,au as qt,av as Gt,ap as Qt,aq as Jt,a as jt,ar as ft,as as $,x as o,I as Q,A as N,af as P,an as $t,at as tt,aP as Nt}from"../chunks/Cw_GAJ-8.js";import{p as j,s as te}from"../chunks/DaUur2Kz.js";import{e as _t,s as ee}from"../chunks/tsz7uQk5.js";import{i as dt}from"../chunks/JX9NnDbc.js";import{b as se}from"../chunks/C3V-GO8h.js";import{c as ie,F as oe,B as St,C as ae,d as ne,e as gt,f as L,g as wt,h as re,i as st,j as et,Q as Mt,k as vt,V as U,R as he,l as le,m as ce,S as de,n as pe,W as ue,A as me,D as Rt,M as fe,b as bt,o as pt}from"../chunks/fooTKfNC.js";import"../chunks/DTVZafTn.js";import"../chunks/E_7-NnNK.js";class _e extends ie{constructor(t){super(t)}load(t,e,i,n){const p=this,u=new oe(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(T){try{e(p.parse(T))}catch(C){n?n(C):console.error(C),p.manager.itemError(t)}},i,n)}parse(t){function e(m){const l=new DataView(m),g=32/8*3+32/8*3*3+16/8,_=l.getUint32(80,!0);if(80+32/8+_*g===l.byteLength)return!0;const f=[115,111,108,105,100];for(let h=0;h<5;h++)if(i(f,l,h))return!1;return!0}function i(m,l,g){for(let _=0,x=m.length;_<x;_++)if(m[_]!==l.getUint8(g+_))return!1;return!0}function n(m){const l=new DataView(m),g=l.getUint32(80,!0);let _,x,f,h=!1,c,a,F,K,B;for(let b=0;b<70;b++)l.getUint32(b,!1)==1129270351&&l.getUint8(b+4)==82&&l.getUint8(b+5)==61&&(h=!0,c=new Float32Array(g*3*3),a=l.getUint8(b+6)/255,F=l.getUint8(b+7)/255,K=l.getUint8(b+8)/255,B=l.getUint8(b+9)/255);const z=84,E=12*4+2,D=new St,O=new Float32Array(g*3*3),I=new Float32Array(g*3*3),Z=new ae;for(let b=0;b<g;b++){const Y=z+b*E,X=l.getFloat32(Y,!0),W=l.getFloat32(Y+4,!0),V=l.getFloat32(Y+8,!0);if(h){const S=l.getUint16(Y+48,!0);S&32768?(_=a,x=F,f=K):(_=(S&31)/31,x=(S>>5&31)/31,f=(S>>10&31)/31)}for(let S=1;S<=3;S++){const q=Y+S*12,M=b*3*3+(S-1)*3;O[M]=l.getFloat32(q,!0),O[M+1]=l.getFloat32(q+4,!0),O[M+2]=l.getFloat32(q+8,!0),I[M]=X,I[M+1]=W,I[M+2]=V,h&&(Z.setRGB(_,x,f,ne),c[M]=Z.r,c[M+1]=Z.g,c[M+2]=Z.b)}}return D.setAttribute("position",new gt(O,3)),D.setAttribute("normal",new gt(I,3)),h&&(D.setAttribute("color",new gt(c,3)),D.hasColors=!0,D.alpha=B),D}function p(m){const l=new St,g=/solid([\s\S]*?)endsolid/g,_=/facet([\s\S]*?)endfacet/g,x=/solid\s(.+)/;let f=0;const h=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,c=new RegExp("vertex"+h+h+h,"g"),a=new RegExp("normal"+h+h+h,"g"),F=[],K=[],B=[],z=new L;let E,D=0,O=0,I=0;for(;(E=g.exec(m))!==null;){O=I;const Z=E[0],b=(E=x.exec(Z))!==null?E[1]:"";for(B.push(b);(E=_.exec(Z))!==null;){let W=0,V=0;const S=E[0];for(;(E=a.exec(S))!==null;)z.x=parseFloat(E[1]),z.y=parseFloat(E[2]),z.z=parseFloat(E[3]),V++;for(;(E=c.exec(S))!==null;)F.push(parseFloat(E[1]),parseFloat(E[2]),parseFloat(E[3])),K.push(z.x,z.y,z.z),W++,I++;V!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+f),W!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+f),f++}const Y=O,X=I-O;l.userData.groupNames=B,l.addGroup(Y,X,D),D++}return l.setAttribute("position",new wt(F,3)),l.setAttribute("normal",new wt(K,3)),l}function u(m){return typeof m!="string"?new TextDecoder().decode(m):m}function T(m){if(typeof m=="string"){const l=new Uint8Array(m.length);for(let g=0;g<m.length;g++)l[g]=m.charCodeAt(g)&255;return l.buffer||l}else return m}const C=T(t);return e(C)?n(C):p(u(t))}}const At={type:"change"},Et={type:"start"},Ut={type:"end"},ut=new he,Lt=new le,ge=Math.cos(70*ce.DEG2RAD),w=new L,A=2*Math.PI,d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},yt=1e-6;class be extends re{constructor(t,e=null){super(t,e),this.state=d.NONE,this.enabled=!0,this.target=new L,this.cursor=new L,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:st.ROTATE,MIDDLE:st.DOLLY,RIGHT:st.PAN},this.touches={ONE:et.ROTATE,TWO:et.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new L,this._lastQuaternion=new Mt,this._lastTargetPosition=new L,this._quat=new Mt().setFromUnitVectors(t.up,new L(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new vt,this._sphericalDelta=new vt,this._scale=1,this._panOffset=new L,this._rotateStart=new U,this._rotateEnd=new U,this._rotateDelta=new U,this._panStart=new U,this._panEnd=new U,this._panDelta=new U,this._dollyStart=new U,this._dollyEnd=new U,this._dollyDelta=new U,this._dollyDirection=new L,this._mouse=new U,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=we.bind(this),this._onPointerDown=ye.bind(this),this._onPointerUp=Ee.bind(this),this._onContextMenu=ve.bind(this),this._onMouseWheel=De.bind(this),this._onKeyDown=Te.bind(this),this._onTouchStart=Se.bind(this),this._onTouchMove=Me.bind(this),this._onMouseDown=Pe.bind(this),this._onMouseMove=xe.bind(this),this._interceptControlDown=Re.bind(this),this._interceptControlUp=Ae.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(At),this.update(),this.state=d.NONE}update(t=null){const e=this.object.position;w.copy(e).sub(this.target),w.applyQuaternion(this._quat),this._spherical.setFromVector3(w),this.autoRotate&&this.state===d.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,n=this.maxAzimuthAngle;isFinite(i)&&isFinite(n)&&(i<-Math.PI?i+=A:i>Math.PI&&(i-=A),n<-Math.PI?n+=A:n>Math.PI&&(n-=A),i<=n?this._spherical.theta=Math.max(i,Math.min(n,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+n)/2?Math.max(i,this._spherical.theta):Math.min(n,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let p=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const u=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),p=u!=this._spherical.radius}if(w.setFromSpherical(this._spherical),w.applyQuaternion(this._quatInverse),e.copy(this.target).add(w),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let u=null;if(this.object.isPerspectiveCamera){const T=w.length();u=this._clampDistance(T*this._scale);const C=T-u;this.object.position.addScaledVector(this._dollyDirection,C),this.object.updateMatrixWorld(),p=!!C}else if(this.object.isOrthographicCamera){const T=new L(this._mouse.x,this._mouse.y,0);T.unproject(this.object);const C=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),p=C!==this.object.zoom;const m=new L(this._mouse.x,this._mouse.y,0);m.unproject(this.object),this.object.position.sub(m).add(T),this.object.updateMatrixWorld(),u=w.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;u!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(u).add(this.object.position):(ut.origin.copy(this.object.position),ut.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(ut.direction))<ge?this.object.lookAt(this.target):(Lt.setFromNormalAndCoplanarPoint(this.object.up,this.target),ut.intersectPlane(Lt,this.target))))}else if(this.object.isOrthographicCamera){const u=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),u!==this.object.zoom&&(this.object.updateProjectionMatrix(),p=!0)}return this._scale=1,this._performCursorZoom=!1,p||this._lastPosition.distanceToSquared(this.object.position)>yt||8*(1-this._lastQuaternion.dot(this.object.quaternion))>yt||this._lastTargetPosition.distanceToSquared(this.target)>yt?(this.dispatchEvent(At),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(t){return t!==null?A/60*this.autoRotateSpeed*t:A/60/60*this.autoRotateSpeed}_getZoomScale(t){const e=Math.abs(t*.01);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){w.setFromMatrixColumn(e,0),w.multiplyScalar(-t),this._panOffset.add(w)}_panUp(t,e){this.screenSpacePanning===!0?w.setFromMatrixColumn(e,1):(w.setFromMatrixColumn(e,0),w.crossVectors(this.object.up,w)),w.multiplyScalar(t),this._panOffset.add(w)}_pan(t,e){const i=this.domElement;if(this.object.isPerspectiveCamera){const n=this.object.position;w.copy(n).sub(this.target);let p=w.length();p*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*p/i.clientHeight,this.object.matrix),this._panUp(2*e*p/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),n=t-i.left,p=e-i.top,u=i.width,T=i.height;this._mouse.x=n/u*2-1,this._mouse.y=-(p/T)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(A*this._rotateDelta.x/e.clientHeight),this._rotateUp(A*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(A*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-A*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(A*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-A*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(this._pointers.length===1)this._rotateStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._rotateStart.set(i,n)}}_handleTouchStartPan(t){if(this._pointers.length===1)this._panStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._panStart.set(i,n)}}_handleTouchStartDolly(t){const e=this._getSecondPointerPosition(t),i=t.pageX-e.x,n=t.pageY-e.y,p=Math.sqrt(i*i+n*n);this._dollyStart.set(0,p)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(this._pointers.length==1)this._rotateEnd.set(t.pageX,t.pageY);else{const i=this._getSecondPointerPosition(t),n=.5*(t.pageX+i.x),p=.5*(t.pageY+i.y);this._rotateEnd.set(n,p)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(A*this._rotateDelta.x/e.clientHeight),this._rotateUp(A*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(this._pointers.length===1)this._panEnd.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._panEnd.set(i,n)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const e=this._getSecondPointerPosition(t),i=t.pageX-e.x,n=t.pageY-e.y,p=Math.sqrt(i*i+n*n);this._dollyEnd.set(0,p),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const u=(t.pageX+e.x)*.5,T=(t.pageY+e.y)*.5;this._updateZoomParameters(u,T)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];e===void 0&&(e=new U,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){const e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){const e=t.deltaMode,i={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return t.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function ye(s){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(s.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(s)&&(this._addPointer(s),s.pointerType==="touch"?this._onTouchStart(s):this._onMouseDown(s)))}function we(s){this.enabled!==!1&&(s.pointerType==="touch"?this._onTouchMove(s):this._onMouseMove(s))}function Ee(s){switch(this._removePointer(s),this._pointers.length){case 0:this.domElement.releasePointerCapture(s.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Ut),this.state=d.NONE;break;case 1:const t=this._pointers[0],e=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:e.x,pageY:e.y});break}}function Pe(s){let t;switch(s.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case st.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(s),this.state=d.DOLLY;break;case st.ROTATE:if(s.ctrlKey||s.metaKey||s.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(s),this.state=d.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(s),this.state=d.ROTATE}break;case st.PAN:if(s.ctrlKey||s.metaKey||s.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(s),this.state=d.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(s),this.state=d.PAN}break;default:this.state=d.NONE}this.state!==d.NONE&&this.dispatchEvent(Et)}function xe(s){switch(this.state){case d.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(s);break;case d.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(s);break;case d.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(s);break}}function De(s){this.enabled===!1||this.enableZoom===!1||this.state!==d.NONE||(s.preventDefault(),this.dispatchEvent(Et),this._handleMouseWheel(this._customWheelEvent(s)),this.dispatchEvent(Ut))}function Te(s){this.enabled!==!1&&this._handleKeyDown(s)}function Se(s){switch(this._trackPointer(s),this._pointers.length){case 1:switch(this.touches.ONE){case et.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(s),this.state=d.TOUCH_ROTATE;break;case et.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(s),this.state=d.TOUCH_PAN;break;default:this.state=d.NONE}break;case 2:switch(this.touches.TWO){case et.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(s),this.state=d.TOUCH_DOLLY_PAN;break;case et.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(s),this.state=d.TOUCH_DOLLY_ROTATE;break;default:this.state=d.NONE}break;default:this.state=d.NONE}this.state!==d.NONE&&this.dispatchEvent(Et)}function Me(s){switch(this._trackPointer(s),this.state){case d.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(s),this.update();break;case d.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(s),this.update();break;case d.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(s),this.update();break;case d.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(s),this.update();break;default:this.state=d.NONE}}function ve(s){this.enabled!==!1&&s.preventDefault()}function Re(s){s.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Ae(s){s.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var Le=it('<p class="error-message svelte-htrp2t">Error loading 3D model.</p>'),Ce=it('<p class="loading-message svelte-htrp2t">Loading texture...</p>'),Oe=it('<p class="error-message svelte-htrp2t">Error loading texture.</p>'),ke=it('<div class="upload-container svelte-htrp2t"><input type="file" accept="image/*" class="svelte-htrp2t"> <p>Upload your own picture to texture the model.</p></div>'),je=it('<div class="floating-model-container svelte-htrp2t"><!> <div class="controls svelte-htrp2t"><button class="svelte-htrp2t"> </button> <button class="svelte-htrp2t">Reset View</button></div></div> <!>',1);function Ne(s,t){Ot(t,!1);let e=j(t,"stlFile",8,"/models/tshirt.stl"),i=j(t,"defaultTextureImage",8,"/texture/boom.png");j(t,"width",8,"100%"),j(t,"height",8,"300px");let n=j(t,"backgroundColor",8,0),p=j(t,"modelColor",8,8421504),u=j(t,"floating",8,!1),T=j(t,"rotationSpeedY",8,.01),C=j(t,"autoRotate",8,!0),m=j(t,"enableZoom",8,!0),l=j(t,"initialZoom",8,8),g=j(t,"drawingData",8,null),_=Q(null),x,f,h,c=Q(null),a=Q(null),F=null,K=Q(!1),B=0;const z=.005,E=.1;let D=Q(!1),O=Q(!1);kt(()=>{setTimeout(()=>{o(_)&&I()}),window.addEventListener("resize",X)}),Vt(()=>{var r;window.removeEventListener("resize",X),h&&(h.dispose(),h.forceContextLoss()),(r=o(c))!=null&&r.material&&(Array.isArray(o(c).material)?o(c).material.forEach(y=>y.dispose()):o(c).material.dispose()),o(a)&&o(a).dispose()});function I(){var rt,G,ht;const r=((rt=o(_))==null?void 0:rt.offsetWidth)||800,y=((G=o(_))==null?void 0:G.offsetHeight)||600;x=new de,f=new pe(75,r/y,.1,1e3),f.position.z=l(),h=new ue({antialias:!0,alpha:!0}),h.setSize(r,y),h.setClearColor(n(),1),(ht=o(_))==null||ht.appendChild(h.domElement),N(a,new be(f,h.domElement)),P(a,o(a).enableZoom=m()),P(a,o(a).enablePan=!1),P(a,o(a).minPolarAngle=Math.PI/2),P(a,o(a).maxPolarAngle=Math.PI/2),P(a,o(a).enableDamping=!0),P(a,o(a).dampingFactor=.05),P(a,o(a).autoRotate=C()),P(a,o(a).autoRotateSpeed=T()*10),P(a,o(a).minDistance=3),P(a,o(a).maxDistance=15);const v=new me(4210752);x.add(v);const k=new Rt(16777215,.7);k.position.set(1,1,1).normalize(),x.add(k);const R=new Rt(16777215,.3);R.position.set(-1,-1,-1).normalize(),x.add(R),new _e().load(e(),H=>{H.computeBoundingBox();const lt=H.boundingBox,mt=new L;lt.getSize(mt);const Kt=H.getAttribute("position"),Dt=[],ct=Kt.array;for(let ot=0;ot<ct.length;ot+=3){const Xt=ct[ot],Wt=ct[ot+1];ct[ot+2],Dt.push((Xt-lt.min.x)/mt.x,(Wt-lt.min.y)/mt.y)}H.setAttribute("uv",new wt(Dt,2));const Bt=b();N(c,new fe(H,Bt)),H.computeBoundingBox();const Tt=new L;lt.getCenter(Tt),o(c).position.sub(Tt),x.add(o(c)),Z(H),Y()},void 0,H=>{console.error("STL Load Error:",H),N(K,!0)})}function Z(r){if(!r||!r.boundingBox)return;const y=r.boundingBox,v=new L;y.getSize(v);const k=Math.max(v.x,v.y,v.z);if(k>0&&(k>10||k<.1)){const R=Math.max(k*2,l());f.position.z=R,o(a)&&(P(a,o(a).minDistance=R*.5),P(a,o(a).maxDistance=R*2))}}function b(){N(D,!0),N(O,!1);try{if(g()){const r=new bt().load(g());return r.anisotropy=(h==null?void 0:h.capabilities.getMaxAnisotropy())||1,N(D,!1),new pt({map:r})}if(F)return F.anisotropy=(h==null?void 0:h.capabilities.getMaxAnisotropy())||1,N(D,!1),new pt({map:F});if(i()){const r=new bt().load(i());return r.anisotropy=(h==null?void 0:h.capabilities.getMaxAnisotropy())||1,N(D,!1),new pt({map:r})}}catch(r){console.error("Texture load error:",r),N(O,!0)}return N(D,!1),new pt({color:p(),specular:1118481,shininess:30})}function Y(){!h||!x||!f||(requestAnimationFrame(Y),o(a)&&o(a).update(),o(c)&&u()&&(B+=z,P(c,o(c).position.y=Math.sin(B)*E)),h.render(x,f))}function X(){if(!f||!h||!o(_))return;const r=o(_).offsetWidth,y=o(_).offsetHeight;f.aspect=r/y,f.updateProjectionMatrix(),h.setSize(r,y)}function W(r){var k;const y=(k=r.target.files)==null?void 0:k[0];if(!y)return;const v=new FileReader;v.onload=()=>{F=new bt().load(v.result),o(c)&&(P(c,o(c).material=b()),P(c,o(c).material.needsUpdate=!0))},v.readAsDataURL(y)}function V(){o(a)&&P(a,o(a).autoRotate=!o(a).autoRotate)}function S(){f&&o(a)&&(f.position.z=l(),f.position.x=0,f.position.y=0,o(a).target.set(0,0,0),o(a).update())}qt(()=>($t(g()),o(c)),()=>{g()&&o(c)&&(P(c,o(c).material=b()),P(c,o(c).material.needsUpdate=!0))}),Gt(),Ct();var q=je(),M=Qt(q),Pt=$(M);{var Ft=r=>{var y=Le();J(r,y)},zt=(r,y)=>{{var v=R=>{var nt=Ce();J(R,nt)},k=(R,nt)=>{{var rt=G=>{var ht=Oe();J(G,ht)};dt(R,G=>{o(O)&&G(rt)},nt)}};dt(r,R=>{o(D)?R(v):R(k,!1)},y)}};dt(Pt,r=>{o(K)?r(Ft):r(zt,!1)})}var xt=ft(Pt,2),at=$(xt),It=$(at,!0);tt(at);var Yt=ft(at,2);tt(xt),tt(M),se(M,r=>N(_,r),()=>o(_));var Zt=ft(M,2);{var Ht=r=>{var y=ke(),v=$(y);Nt(2),tt(y),_t("change",v,W),J(r,y)};dt(Zt,r=>{g()||r(Ht)})}Jt(()=>{var r;return ee(It,(r=o(a))!=null&&r.autoRotate?"Stop Rotation":"Start Rotation")}),_t("click",at,V),_t("click",Yt,S),J(s,q),jt()}var Ue=it('<div class="page-wrapper svelte-5cpycs"><div class="model-container svelte-5cpycs"><!></div> <div class="about-section svelte-5cpycs"><h2 class="svelte-5cpycs">About Pexos</h2> <p class="svelte-5cpycs">Wadim Seminsky and Bertin van Vliet, two passionate visionaries, crafted Pexos as a vibrant creative platform where artists can unleash their imaginations and bring drawings to life. This space is a celebration of art, innovation, and community.</p> <p class="svelte-5cpycs">Right now, we’re rallying support for a heartfelt cause—raising funds to help a dear friend get new teeth, restoring their confidence and smile. Every small gesture counts, and you can make a difference! Join us in this mission by grabbing a virtual coffee for the cause at <a href="https://buymeacoffee.com/wadiem" target="_blank" class="coffee-button svelte-5cpycs">buymeacoffee.com/wadiem</a>. Your support fuels both creativity and kindness!</p></div> <p class="quote svelte-5cpycs">"They hang me up to dry too many times" - Cold War Kids</p></div>');function Ve(s,t){Ot(t,!1);const e={stlFile:"/models/tshirt.stl",defaultTextureImage:"/texture/boom.png",width:"100%",height:"400px",backgroundColor:"#f0f0f0",modelColor:"#cccccc",floating:!0,rotationSpeedY:.5,autoRotate:!0,enableZoom:!0};kt(async()=>{}),Ct();var i=Ue(),n=$(i),p=$(n);Ne(p,te(e)),tt(n),Nt(4),tt(i),J(s,i),jt()}export{Ve as component};
