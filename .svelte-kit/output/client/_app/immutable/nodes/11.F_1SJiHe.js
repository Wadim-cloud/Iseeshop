import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as oa,o as ra,am as ia,an as na,ao as la,ap as va,a as pa,ar as l,at as s,x as a,G as _,A as d,au as e,aq as k,w as ca,al as fa}from"../chunks/CgpLTG9e.js";import{s as h,e as I}from"../chunks/C_m-qMmZ.js";import{i as T}from"../chunks/ClXQIVwo.js";import{e as ga,i as ma}from"../chunks/B6FZq7_G.js";import{t as f,a as c}from"../chunks/CVxkZOGS.js";import{r as ua,s as P}from"../chunks/CvOifuop.js";import{a as _a}from"../chunks/Dzbni-AY.js";import{p as da}from"../chunks/Bfc47y5P.js";import{i as ha}from"../chunks/CKI-jMsq.js";import{s as xa,a as ba}from"../chunks/CN5En7F1.js";import{l as ya,s as Sa,c as wa,n as Ta,u as Da}from"../chunks/DTDRKe3P.js";import{T as Na}from"../chunks/Ct8AHqA9.js";var Oa=f('<div class="loading svelte-1ovrh0x"><span class="spinner svelte-1ovrh0x"></span> <span>Loading...</span></div>'),ka=f('<p class="alert alert-error svelte-1ovrh0x"> </p>'),ja=f('<p class="alert alert-success svelte-1ovrh0x"> </p>'),qa=f('<div class="toggle-group svelte-1ovrh0x"><span class="toggle-label svelte-1ovrh0x"> </span> <label class="toggle-switch svelte-1ovrh0x"><input type="checkbox" class="svelte-1ovrh0x"> <span class="slider svelte-1ovrh0x"><span class="toggle-text svelte-1ovrh0x"> </span></span></label></div>'),La=f('<p class="warning svelte-1ovrh0x">Disabling all notifications will stop push notifications.</p>'),Ma=f('<form class="svelte-1ovrh0x"><!> <!> <p class="role svelte-1ovrh0x">Role: <span class="svelte-1ovrh0x"> </span></p> <button type="submit" class="svelte-1ovrh0x"> </button></form>'),Aa=f('<main class="svelte-1ovrh0x"><div class="settings-card svelte-1ovrh0x"><h1 class="svelte-1ovrh0x">Notification Settings</h1> <!> <!></div></main> <!>',1);function Va(J,K){oa(K,!1);const[Q,U]=xa(),R=()=>ba(Ta,"$notificationStore",Q),o=_(),j=_(),g=_(),x=_(),D=_(),b=_();async function V(){console.log("handleSubmit: Submitting settings:",a(o)),await Da()}function W(t,r){console.log(`handleToggle: Toggled ${t} to ${r}`)}ra(async()=>{console.log("onMount: Loading profile and setting up notifications"),await ya(),await Sa()}),ia(()=>{console.log("onDestroy: Cleaning up subscriptions"),wa()}),na(()=>(a(o),a(j),a(g),a(x),a(D),a(b),R()),()=>{(t=>(d(o,t.notifications),d(j,t.role),d(g,t.loading),d(x,t.error),d(D,t.success),d(b,t.toast)))(R())}),la(),ha();var z=Aa(),q=va(z),B=s(q),E=l(s(B),2);{var X=t=>{var r=Oa();c(t,r)},Y=(t,r)=>{{var N=v=>{var i=ka(),m=s(i,!0);e(i),k(()=>h(m,a(x))),c(v,i)},O=(v,i)=>{{var m=y=>{var p=ja(),L=s(p,!0);e(p),k(()=>h(L,a(D))),c(y,p)};T(v,y=>{a(D)&&y(m)},i)}};T(t,v=>{a(x)?v(N):v(O,!1)},r)}};T(E,t=>{a(g)?t(X):t(Y,!1)})}var Z=l(E,2);{var $=t=>{var r=Ma(),N=s(r);ga(N,1,()=>Object.entries(a(o)),ma,(S,w)=>{let n=()=>a(w)[0];var M=qa(),A=s(M),ta=s(A);e(A);var C=l(A,2),u=s(C);ua(u);var F=l(u,2),H=s(F),sa=s(H,!0);e(H),e(F),e(C),e(M),k((G,ea)=>{h(ta,`Notify me about ${G??""}`),P(C,"for",n()),P(u,"id",n()),P(u,"aria-label",ea),h(sa,a(o)[n()]?"On":"Off")},[()=>n().replace("_"," "),()=>`Toggle notifications for ${n().replace("_"," ")}`],ca),_a(u,()=>a(o)[n()],G=>fa(o,a(o)[n()]=G)),I("change",u,()=>W(n(),a(o)[n()])),c(S,M)});var O=l(N,2);{var v=S=>{var w=La();c(S,w)};T(O,S=>{Object.values(a(o)).every(w=>!w)&&S(v)})}var i=l(O,2),m=l(s(i)),y=s(m,!0);e(m),e(i);var p=l(i,2),L=s(p,!0);e(p),e(r),k(()=>{h(y,a(j)||"Not set"),p.disabled=a(g),h(L,a(g)?"Saving...":"Save Settings")}),I("submit",r,da(V)),c(t,r)};T(Z,t=>{!a(g)&&!a(x)&&t($)})}e(B),e(q);var aa=l(q,2);Na(aa,{get message(){return a(b).message},get show(){return a(b).show},get type(){return a(b).type}}),c(J,z),pa(),U()}export{Va as component};
