import{t as k,a as q}from"../chunks/DPmhzSt5.js";import{i as R}from"../chunks/CHpTJ84V.js";import{p as z,a as M,Z as g,Y as y,az as f,ay as L,t as r,o as U,a1 as p,A,v as E}from"../chunks/BDHGhfTE.js";import{e as T}from"../chunks/CvTsB6m-.js";import{r as V,s as B}from"../chunks/D02H29ki.js";import{b as C}from"../chunks/BvDJoXBx.js";import{s as x}from"../chunks/BqOODIDs.js";import{s as O}from"../chunks/CTjs_13Y.js";import{e as S}from"../chunks/CgxHyAce.js";import{c as W,t as Y}from"../chunks/CNoJYvQC.js";import{p as b}from"../chunks/ChMpMzq7.js";function Z(t){return--t*t*t*t*t+1}const[j,ne]=W({duration:t=>Math.sqrt(t*200),fallback(t,d){const o=getComputedStyle(t),s=o.transform==="none"?"":o.transform;return{duration:600,easing:Z,css:u=>`
				transform: ${s} scale(${u});
				opacity: ${u}
			`}}});var G=k('<li class="svelte-1dl020x"><input type="checkbox" class="svelte-1dl020x"> <span> </span> <button aria-label="Remove" class="svelte-1dl020x"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" class="svelte-1dl020x"><path fill="#888" stroke="none" d="M22 4.2h-5.6L15 1.6c-.1-.2-.4-.4-.7-.4H9.6c-.2 0-.5.2-.6.4L7.6 4.2H2c-.4 0-.8.4-.8.8s.4.8.8.8h1.8V22c0 .4.3.8.8.8h15c.4 0 .8-.3.8-.8V5.8H22c.4 0 .8-.3.8-.8s-.4-.8-.8-.8zM10.8 16.5c0 .4-.3.8-.8.8s-.8-.3-.8-.8V10c0-.4.3-.8.8-.8s.8.3.8.8v6.5zm4 0c0 .4-.3.8-.8.8s-.8-.3-.8-.8V10c0-.4.3-.8.8-.8s.8.3.8.8v6.5z" class="svelte-1dl020x"></path></svg></button></li>'),I=k('<ul class="svelte-1dl020x"></ul>');function P(t,d){z(d,!1);let o=b(d,"todos",24,()=>[]),s=b(d,"onToggleDone",8),u=b(d,"onRemove",8);R();var h=I();S(h,5,o,v=>v.id,(v,l)=>{var i=G(),n=y(i);V(n);var c=f(n,2),w=y(c,!0);g(c);var _=f(c,2);g(i),L(()=>{B(n,r(l).done),O(w,r(l).description)}),T("change",n,()=>s()(r(l))),T("click",_,()=>u()(r(l))),Y(3,i,()=>j),q(v,i)}),g(h),q(t,h),M()}var J=k('<div class="board svelte-1lqry9u"><input placeholder="What needs to be done?" class="svelte-1lqry9u"> <div class="todo"><h2 class="svelte-1lqry9u">Todo</h2> <!></div> <div class="done"><h2 class="svelte-1lqry9u">Done</h2> <!></div></div>');function ie(t,d){z(d,!1);let o=A([]),s=A("");U(async()=>{await u()});async function u(){const{data:e,error:a}=await x.from("todos").select("*").order("id",{ascending:!0});if(a){console.error("Error fetching todos:",a.message);return}p(o,e)}async function h(){if(r(s).trim())try{const{data:e,error:a}=await x.from("todos").insert([{description:r(s),done:!1}]).select();if(a){console.error("Error adding todo:",a.message),alert("Failed to add todo. Please try again.");return}Array.isArray(e)&&p(o,[...r(o),...e]),p(s,"")}catch(e){console.error("Unexpected error while adding todo:",e),alert("An unexpected error occurred. Please try again.")}}async function v(e){try{const{error:a}=await x.from("todos").update({done:!e.done}).eq("id",e.id);if(a){console.error("Error updating todo:",a.message),alert("Failed to update todo. Please try again.");return}p(o,r(o).map(m=>m.id===e.id?{...m,done:!m.done}:m))}catch(a){console.error("Unexpected error while updating todo:",a),alert("An unexpected error occurred. Please try again.")}}async function l(e){const{error:a}=await x.from("todos").delete().eq("id",e.id);if(a){console.error("Error deleting todo:",a.message),alert("Failed to delete todo. Please try again.");return}p(o,r(o).filter(m=>m.id!==e.id))}R();var i=J(),n=y(i);V(n);var c=f(n,2),w=f(y(c),2);const _=E(()=>r(o).filter(e=>!e.done));P(w,{get todos(){return r(_)},onToggleDone:v,onRemove:l}),g(c);var D=f(c,2),F=f(y(D),2);const H=E(()=>r(o).filter(e=>e.done));P(F,{get todos(){return r(H)},onToggleDone:v,onRemove:l}),g(D),g(i),C(n,()=>r(s),e=>p(s,e)),T("keydown",n,e=>e.key==="Enter"&&h()),q(t,i),M()}export{ie as component};
