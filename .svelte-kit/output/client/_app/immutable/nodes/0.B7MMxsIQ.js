var vt=t=>{throw TypeError(t)};var Ye=(t,e,r)=>e.has(t)||vt("Cannot "+r);var h=(t,e,r)=>(Ye(t,e,"read from private field"),r?r.call(t):e.get(t)),I=(t,e,r)=>e.has(t)?vt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),N=(t,e,r,n)=>(Ye(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),re=(t,e,r)=>(Ye(t,e,"access private method"),r);import"../chunks/CWj6FrbW.js";import{ao as K,h as Qe,c as ht,Y as Zt,aU as $t,j as Ze,a8 as er,aR as tr,aQ as rr,s as nr,T as Re,b as ar,E as or,g as ir,O as sr,a6 as cr,A as S,aV as lr,x as d,a0 as ur,m as dr,u as fr,aM as mr,p as Te,G as ce,al as gt,ak as vr,am as hr,an as Q,ar as X,w as Me,as as L,ap as b,a as ze,aL as nt,z as gr,aN as Ge,aW as pr,ag as H,o as Ct,ax as _r}from"../chunks/9BOlcS-b.js";import{e as A,s as He,o as fe,h as Rt}from"../chunks/BsZz1DC-.js";import{d as pt,e as wr,t as C,a as E,c as Mt,f as yr}from"../chunks/Bnw62dMu.js";import{i as q}from"../chunks/WEOj8Vpi.js";import{a as _e,s as xt}from"../chunks/BR43cs2B.js";import{a as br,s as Be,c as _t}from"../chunks/BeMxMaC5.js";import"../chunks/69_IOA4Y.js";import{e as xe,i as Sr}from"../chunks/DhNq3B23.js";import{s as at}from"../chunks/CTf98LKf.js";import{s as Ke}from"../chunks/Cb2afnRg.js";import{i as Er}from"../chunks/xvq0-Hdq.js";import{p as P}from"../chunks/Cmn9WjR9.js";import{g as pe,i as kr}from"../chunks/zThV1SCZ.js";import{w as $e,d as Je}from"../chunks/C6Q-HWxe.js";import{A as Tr}from"../chunks/CM5gJEXl.js";import{n as zr,m as Ar}from"../chunks/D2rZxUgV.js";function Cr(t,e,r=!1,n=!1,o=!1){var l=t,u="";K(()=>{var f=Zt;if(u===(u=e()??"")){Qe&&ht();return}if(f.nodes_start!==null&&($t(f.nodes_start,f.nodes_end),f.nodes_start=f.nodes_end=null),u!==""){if(Qe){Ze.data;for(var m=ht(),g=m;m!==null&&(m.nodeType!==8||m.data!=="");)g=m,m=er(m);if(m===null)throw tr(),rr;pt(Ze,g),l=nr(m);return}var p=u+"";r?p=`<svg>${p}</svg>`:n&&(p=`<math>${p}</math>`);var k=wr(p);if((r||n)&&(k=Re(k)),pt(Re(k),k.lastChild),r||n)for(;Re(k);)l.before(Re(k));else l.before(k)}})}function Rr(t,e,...r){var n=t,o=sr,l;ar(()=>{o!==(o=e())&&(l&&(cr(l),l=null),l=ir(()=>o(n,...r)))},or),Qe&&(n=Ze)}function Mr(t){S(t,t.v+1)}function We(t){let e=0,r=ur(0),n;return()=>{lr()&&(d(r),dr(()=>(e===0&&(n=fr(()=>t(()=>Mr(r)))),e+=1,()=>{mr().then(()=>{e-=1,e===0&&(n==null||n(),n=void 0)})})))}}var xr=C("<div></div>"),Br=C("<div></div>"),Ir=C("<div></div>"),Nr=C('<span class="badge svelte-12fzeem"> </span>'),Lr=C('<div class="menu-block svelte-12fzeem" title="Notifications">üîî <!></div> <div class="menu-block logout svelte-12fzeem" title="Logout">üö™</div> <div class="menu-block avatar svelte-12fzeem" title="Profile"><img alt="avatar" class="avatar-image svelte-12fzeem"></div>',1),Pr=C('<div class="menu-block login svelte-12fzeem" title="Login">üîë</div> <div class="menu-block about svelte-12fzeem" title="About">‚ÑπÔ∏è</div>',1),Or=C('<div class="notification-item svelte-12fzeem"><div class="notif-header svelte-12fzeem"><span class="notif-icon svelte-12fzeem">üñºÔ∏è</span> <span class="notif-message svelte-12fzeem"> </span></div> <div class="notif-time svelte-12fzeem"> </div></div>'),jr=C('<div class="notification-item svelte-12fzeem">No notifications</div>'),Gr=C('<div class="notifications-popup svelte-12fzeem"><!> <!></div>'),Wr=C('<div class="navbar-row svelte-12fzeem"><div class="navbar svelte-12fzeem"></div> <div class="label-box svelte-12fzeem">Create</div> <div class="navbar svelte-12fzeem"></div> <div class="label-box svelte-12fzeem">List</div> <div class="label-box svelte-12fzeem">Gallery</div> <div class="navbar svelte-12fzeem"></div> <div class="menu-bar svelte-12fzeem"><!></div></div> <!> <!>',1);function Dr(t,e){Te(e,!1);const[r,n]=xt(),o=()=>_e(p,"$user",r),l=()=>_e(zr,"$notificationStore",r),u=()=>_e(k,"$avatarUrl",r);let f=P(e,"session",8),m=P(e,"onAuthToggle",8);const g=$e(f()),p=Je(g,a=>(a==null?void 0:a.user)||null),k=Je(p,a=>{var c;return((c=a==null?void 0:a.user_metadata)==null?void 0:c.avatar_url)||"/default-avatar.png"});Je(p,a=>{var c,v;return((c=a==null?void 0:a.user_metadata)==null?void 0:c.full_name)||((v=a==null?void 0:a.email)==null?void 0:v.split("@")[0])||"User"});let G=ce(!1),W=ce(!1),s=ce([]);async function i(){const a=await br();if(!a)return;const{data:c,error:v}=await Be.from("notifications").select("id, message, drawing_id, sent, created_at").eq("user_id",a.id).order("created_at",{ascending:!1});!v&&c&&S(s,c)}async function _(a){await Ar(a.user_id,[a.id]),a.drawing_id&&pe(`/gallery/${a.drawing_id}`)}function V(){S(G,!0)}const T=10,se=5,Gt=T*se;function De(){return Array(Gt).fill(null).map((a,c)=>({id:c,isBlack:!1,isBlue:!1,isRed:!1,navigateTo:null}))}let $=ce(De()),ee=ce(De()),te=ce(De()),Wt=[],Dt=[],Ft=[];function st(){alert("Please log in to access this feature."),V()}function Fe(a,c,v){const w=a.currentTarget.getBoundingClientRect(),y=a.clientX-w.left,R=a.clientY-w.top,M=200/T,Z=50/se,O=Math.floor(y/M),j=Math.floor(R/Z),Y=j*T+O;let x=c.map(B=>({...B,isBlue:!1}));const Ce=x.map((B,D)=>{const Kt=Math.floor(D/T),Jt=D%T,Qt=Math.sqrt((Jt-O)**2+(Kt-j)**2);return{index:D,distance:Qt}});Ce.sort((B,D)=>B.distance-D.distance);const Ue=Ce.slice(0,3).map(B=>B.index);x=x.map((B,D)=>({...B,isBlue:Ue.includes(D)&&!B.isBlack})),Y>=0&&Y<x.length&&!x[Y].isBlack&&setTimeout(()=>{x=x.map((B,D)=>({...B,isRed:D===Y&&!B.isBlack})),v([...x]),setTimeout(()=>{x=x.map((B,D)=>({...B,isRed:D===Y?!1:B.isRed})),v([...x])},500)},100),v([...x])}function Ve(a,c,v,w){if(!o())return st();if(w.length<2&&!c[a].isBlack){const y=c.map((R,M)=>({...R,isBlack:M===a?!0:R.isBlack,isBlue:M===a?!1:R.isBlue,isRed:M===a?!1:R.isRed}));w.push(a),y[a].navigateTo=w.length===1?"/create":"/gallery",v([...y])}else c[a].isBlack&&c[a].navigateTo&&pe(c[a].navigateTo)}function Xe(a,c){a(c.map(v=>({...v,isBlue:!1,isRed:!1})))}function me(a){o()?pe(a):st()}gt(()=>vr(f()),()=>{g.set(f())}),gt(()=>d(W),()=>{d(W)&&i()}),hr(),Er();var ct=Wr(),qe=Q(ct),ve=X(qe);xe(ve,5,()=>d($),a=>a.id,(a,c)=>{var v=xr();let w;K(y=>w=Ke(v,1,"block svelte-12fzeem",null,w,y),[()=>({black:d(c).isBlack,blue:d(c).isBlue,red:d(c).isRed})],Me),A("click",v,()=>Ve(d(c).id,d($),y=>S($,y),Wt)),E(a,v)}),L(ve);var lt=b(ve,2),he=b(lt,2);xe(he,5,()=>d(ee),a=>a.id,(a,c)=>{var v=Br();let w;K(y=>w=Ke(v,1,"block svelte-12fzeem",null,w,y),[()=>({black:d(c).isBlack,"alt-blue":d(c).isBlue,"alt-red":d(c).isRed})],Me),A("click",v,()=>Ve(d(c).id,d(ee),y=>S(ee,y),Dt)),E(a,v)}),L(he);var ut=b(he,2),dt=b(ut,2),ge=b(dt,2);xe(ge,5,()=>d(te),a=>a.id,(a,c)=>{var v=Ir();let w;K(y=>w=Ke(v,1,"block svelte-12fzeem",null,w,y),[()=>({black:d(c).isBlack,"alt2-blue":d(c).isBlue,"alt2-red":d(c).isRed})],Me),A("click",v,()=>Ve(d(c).id,d(te),y=>S(te,y),Ft)),E(a,v)}),L(ge);var ft=b(ge,2),Vt=X(ft);{var Xt=a=>{var c=Lr(),v=Q(c),w=b(X(v));{var y=O=>{var j=Nr(),Y=X(j,!0);L(j),K(()=>He(Y,l().unreadCount)),E(O,j)};q(w,O=>{l().unreadCount>0&&O(y)})}L(v);var R=b(v,2),M=b(R,2),Z=X(M);L(M),K(()=>at(Z,"src",u())),A("click",v,()=>S(W,!d(W))),A("click",R,function(...O){var j;(j=m())==null||j.apply(this,O)}),A("click",M,()=>me("/profile")),E(a,c)},qt=a=>{var c=Pr(),v=Q(c),w=b(v,2);A("click",v,V),A("click",w,()=>me("/about")),E(a,c)};q(Vt,a=>{o()?a(Xt):a(qt,!1)})}L(ft),L(qe);var mt=b(qe,2);{var Ut=a=>{var c=Gr(),v=X(c);xe(v,1,()=>d(s),Sr,(R,M)=>{var Z=Or(),O=X(Z),j=b(X(O),2),Y=X(j,!0);L(j),L(O);var x=b(O,2),Ce=X(x,!0);L(x),L(Z),K(Ue=>{He(Y,d(M).message),He(Ce,Ue)},[()=>new Date(d(M).created_at).toLocaleString()],Me),A("click",Z,()=>_(d(M))),E(R,Z)});var w=b(v,2);{var y=R=>{var M=jr();E(R,M)};q(w,R=>{d(s).length===0&&R(y)})}L(c),E(a,c)};q(mt,a=>{d(W)&&a(Ut)})}var Yt=b(mt,2);{var Ht=a=>{Tr(a,{get show(){return d(G)},set show(c){S(G,c)},$$events:{authSuccess:async()=>{await kr();const c=localStorage.getItem("sb-redirect")||"/";localStorage.removeItem("sb-redirect"),pe(c,{replaceState:!0})},authError:()=>S(G,!1)},$$legacy:!0})};q(Yt,a=>{d(G)&&a(Ht)})}A("mousemove",ve,a=>Fe(a,d($),c=>S($,c))),A("mouseleave",ve,()=>Xe(a=>S($,a),d($))),A("click",lt,()=>me("/create")),A("mousemove",he,a=>Fe(a,d(ee),c=>S(ee,c))),A("mouseleave",he,()=>Xe(a=>S(ee,a),d(ee))),A("click",ut,()=>me("/todo")),A("click",dt,()=>me("/gallery")),A("mousemove",ge,a=>Fe(a,d(te),c=>S(te,c))),A("mouseleave",ge,()=>Xe(a=>S(te,a),d(te))),E(t,ct),ze(),n()}function Fr(t){return typeof t=="function"}function Vr(t){return t!==null&&typeof t=="object"}const we=Symbol("box"),ot=Symbol("is-writable");function Xr(t){return Vr(t)&&we in t}function qr(t){return z.isBox(t)&&ot in t}function z(t){let e=nt(gr(t));return{[we]:!0,[ot]:!0,get current(){return d(e)},set current(r){S(e,r,!0)}}}function Ur(t,e){const r=Ge(t);return e?{[we]:!0,[ot]:!0,get current(){return d(r)},set current(n){e(n)}}:{[we]:!0,get current(){return t()}}}function Yr(t){return z.isBox(t)?t:Fr(t)?z.with(t):z(t)}function Hr(t){return Object.entries(t).reduce((e,[r,n])=>z.isBox(n)?(z.isWritableBox(n)?Object.defineProperty(e,r,{get(){return n.current},set(o){n.current=o}}):Object.defineProperty(e,r,{get(){return n.current}}),e):Object.assign(e,{[r]:n}),{})}function Kr(t){return z.isWritableBox(t)?{[we]:!0,get current(){return t.current}}:t}z.from=Yr;z.with=Ur;z.flatten=Hr;z.readonly=Kr;z.isBox=Xr;z.isWritableBox=qr;var Bt={},wt=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Jr=/\n/g,Qr=/^\s*/,Zr=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,$r=/^:\s*/,en=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,tn=/^[;\s]*/,rn=/^\s+|\s+$/g,nn=`
`,yt="/",bt="*",ne="",an="comment",on="declaration",sn=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var r=1,n=1;function o(s){var i=s.match(Jr);i&&(r+=i.length);var _=s.lastIndexOf(nn);n=~_?s.length-_:n+s.length}function l(){var s={line:r,column:n};return function(i){return i.position=new u(s),g(),i}}function u(s){this.start=s,this.end={line:r,column:n},this.source=e.source}u.prototype.content=t;function f(s){var i=new Error(e.source+":"+r+":"+n+": "+s);if(i.reason=s,i.filename=e.source,i.line=r,i.column=n,i.source=t,!e.silent)throw i}function m(s){var i=s.exec(t);if(i){var _=i[0];return o(_),t=t.slice(_.length),i}}function g(){m(Qr)}function p(s){var i;for(s=s||[];i=k();)i!==!1&&s.push(i);return s}function k(){var s=l();if(!(yt!=t.charAt(0)||bt!=t.charAt(1))){for(var i=2;ne!=t.charAt(i)&&(bt!=t.charAt(i)||yt!=t.charAt(i+1));)++i;if(i+=2,ne===t.charAt(i-1))return f("End of comment missing");var _=t.slice(2,i-2);return n+=2,o(_),t=t.slice(i),n+=2,s({type:an,comment:_})}}function G(){var s=l(),i=m(Zr);if(i){if(k(),!m($r))return f("property missing ':'");var _=m(en),V=s({type:on,property:St(i[0].replace(wt,ne)),value:_?St(_[0].replace(wt,ne)):ne});return m(tn),V}}function W(){var s=[];p(s);for(var i;i=G();)i!==!1&&(s.push(i),p(s));return s}return g(),W()};function St(t){return t?t.replace(rn,ne):ne}var cn=_t&&_t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bt,"__esModule",{value:!0});var Et=Bt.default=un,ln=cn(sn);function un(t,e){var r=null;if(!t||typeof t!="string")return r;var n=(0,ln.default)(t),o=typeof e=="function";return n.forEach(function(l){if(l.type==="declaration"){var u=l.property,f=l.value;o?e(u,f,l):f&&(r=r||{},r[u]=f)}}),r}Et.default;function dn(t,e){const r=RegExp(t,"g");return n=>{if(typeof n!="string")throw new TypeError(`expected an argument of type string, but got ${typeof n}`);return n.match(r)?n.replace(r,e):n}}const fn=dn(/[A-Z]/,t=>`-${t.toLowerCase()}`);function mn(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected an argument of type object, but got ${typeof t}`);return Object.keys(t).map(e=>`${fn(e)}: ${t[e]};`).join(`
`)}function vn(t={}){return mn(t).replace(`
`," ")}const hn={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};vn(hn);const gn=typeof window<"u"?window:void 0;function pn(t){let e=t.activeElement;for(;e!=null&&e.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}var ye,be;class _n{constructor(e,r){I(this,ye);I(this,be);N(this,ye,e),N(this,be,We(r))}get current(){return h(this,be).call(this),h(this,ye).call(this)}}ye=new WeakMap,be=new WeakMap;const wn=/\(.+\)/;class yn extends _n{constructor(e,r){let n=wn.test(e)?e:`(${e})`;const o=window.matchMedia(n);super(()=>o.matches,l=>fe(o,"change",l))}}var le,Se,At;let bn=(At=class{constructor(e={}){I(this,le);I(this,Se);const{window:r=gn,document:n=r==null?void 0:r.document}=e;r!==void 0&&(N(this,le,n),N(this,Se,We(o=>{const l=fe(r,"focusin",o),u=fe(r,"focusout",o);return()=>{l(),u()}})))}get current(){var e;return(e=h(this,Se))==null||e.call(this),h(this,le)?pn(h(this,le)):null}},le=new WeakMap,Se=new WeakMap,At);new bn;function kt(t){return t.filter(e=>e.length>0)}const It={getItem:t=>null,setItem:(t,e)=>{}},Ae=typeof document<"u",Sn=["dark","light","system"];function et(t){return typeof t!="string"?!1:Sn.includes(t)}const Nt=typeof window<"u"?window:void 0;function En(t){let e=t.activeElement;for(;e!=null&&e.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}var ue,Ee;class kn{constructor(e={}){I(this,ue);I(this,Ee);const{window:r=Nt,document:n=r==null?void 0:r.document}=e;r!==void 0&&(N(this,ue,n),N(this,Ee,We(o=>{const l=fe(r,"focusin",o),u=fe(r,"focusout",o);return()=>{l(),u()}})))}get current(){var e;return(e=h(this,Ee))==null||e.call(this),h(this,ue)?En(h(this,ue)):null}}ue=new WeakMap,Ee=new WeakMap;new kn;function Tn(t,e){switch(t){case"local":return e.localStorage;case"session":return e.sessionStorage}}var oe,J,de,ie,ke,F,je,U,Ie,Ne;class Lt{constructor(e,r,n={}){I(this,U);I(this,oe);I(this,J);I(this,de);I(this,ie);I(this,ke);I(this,F,nt(0));I(this,je,e=>{e.key!==h(this,J)||e.newValue===null||(N(this,oe,re(this,U,Ie).call(this,e.newValue)),S(h(this,F),d(h(this,F))+1))});const{storage:o="local",serializer:l={serialize:JSON.stringify,deserialize:JSON.parse},syncTabs:u=!0,window:f=Nt}=n;if(N(this,oe,r),N(this,J,e),N(this,de,l),f===void 0)return;const m=Tn(o,f);N(this,ie,m);const g=m.getItem(e);g!==null?N(this,oe,re(this,U,Ie).call(this,g)):re(this,U,Ne).call(this,r),u&&o==="local"&&N(this,ke,We(()=>fe(f,"storage",h(this,je))))}get current(){var o,l;(o=h(this,ke))==null||o.call(this),d(h(this,F));const e=re(this,U,Ie).call(this,(l=h(this,ie))==null?void 0:l.getItem(h(this,J)))??h(this,oe),r=new WeakMap,n=u=>{if(u===null||(u==null?void 0:u.constructor.name)==="Date"||typeof u!="object")return u;let f=r.get(u);return f||(f=new Proxy(u,{get:(m,g)=>(d(h(this,F)),n(Reflect.get(m,g))),set:(m,g,p)=>(S(h(this,F),d(h(this,F))+1),Reflect.set(m,g,p),re(this,U,Ne).call(this,e),!0)}),r.set(u,f)),f};return n(e)}set current(e){re(this,U,Ne).call(this,e),S(h(this,F),d(h(this,F))+1)}}oe=new WeakMap,J=new WeakMap,de=new WeakMap,ie=new WeakMap,ke=new WeakMap,F=new WeakMap,je=new WeakMap,U=new WeakSet,Ie=function(e){try{return h(this,de).deserialize(e)}catch(r){console.error(`Error when parsing "${e}" from persisted store "${h(this,J)}"`,r);return}},Ne=function(e){var r;try{e!=null&&((r=h(this,ie))==null||r.setItem(h(this,J),h(this,de).serialize(e)))}catch(n){console.error(`Error when writing value from persisted store "${h(this,J)}" to ${h(this,ie)}`,n)}};let Tt,zt;function Pt(t){if(typeof document>"u")return;clearTimeout(Tt),clearTimeout(zt);const e=document.createElement("style"),r=document.createTextNode(`* {
     -webkit-transition: none !important;
     -moz-transition: none !important;
     -o-transition: none !important;
     -ms-transition: none !important;
     transition: none !important;
  }`);e.appendChild(r);const n=()=>document.head.appendChild(e),o=()=>document.head.removeChild(e);if(typeof window.getComputedStyle<"u"){n(),t(),window.getComputedStyle(e).opacity,o();return}if(typeof window.requestAnimationFrame<"u"){n(),t(),window.requestAnimationFrame(o);return}n(),Tt=window.setTimeout(()=>{t(),zt=window.setTimeout(o,120)},120)}const Pe=z("mode-watcher-mode"),Oe=z("mode-watcher-theme"),tt=zn(),rt=Cn(),ae=z(void 0),Le=An(),it=z(!0),Ot=z([]),jt=z([]);function zn(){const t="system",r=(Ae?localStorage:It).getItem(Pe.current),n=et(r)?r:t;return new Lt(Pe.current,n,{serializer:{serialize:o=>o,deserialize:o=>et(o)?o:t}})}function An(){const e=(Ae?localStorage:It).getItem(Oe.current),r=e??"";return new Lt(Oe.current,r,{serializer:{serialize:n=>typeof n!="string"?"":n,deserialize:n=>n}})}function Cn(){let e=!0,r=nt(void 0);function n(){Ae&&S(r,l.current?"light":"dark",!0)}function o(u){e=u}const l=typeof window<"u"&&"matchMedia"in window?new yn("prefers-color-scheme: light"):{current:!1};return pr(()=>{H(()=>{e&&n()})}),{get current(){return d(r)},query:n,tracking:o}}function Rn(){const t=Ge(()=>{if(!Ae)return;const e=tt.current==="system"?rt.current:tt.current,r=kt(Ot.current),n=kt(jt.current);function o(){const l=document.documentElement,u=document.querySelector('meta[name="theme-color"]');e==="light"?(r.length&&l.classList.remove(...r),n.length&&l.classList.add(...n),l.style.colorScheme="light",u&&ae.current&&u.setAttribute("content",ae.current.light)):(n.length&&l.classList.remove(...n),r.length&&l.classList.add(...r),l.style.colorScheme="dark",u&&ae.current&&u.setAttribute("content",ae.current.dark))}return it.current?Pt(o):o(),e});return{get current(){return d(t)}}}function Mn(){const t=Ge(()=>{if(Le.current,!Ae)return;function e(){document.documentElement.setAttribute("data-theme",Le.current)}return it.current?Pt(e):e(),Le.current});return{get current(){return d(t)}}}const xn=Rn(),Bn=Mn();function In(t){tt.current=t}function Nn(t){Le.current=t}function Ln({defaultMode:t="system",themeColors:e,darkClassNames:r=["dark"],lightClassNames:n=[],defaultTheme:o="",modeStorageKey:l="mode-watcher-mode",themeStorageKey:u="mode-watcher-theme"}){const f=document.documentElement,m=localStorage.getItem(l)??t,g=localStorage.getItem(u)??o,p=m==="light"||m==="system"&&window.matchMedia("(prefers-color-scheme: light)").matches;if(p?(r.length&&f.classList.remove(...r),n.length&&f.classList.add(...n)):(n.length&&f.classList.remove(...n),r.length&&f.classList.add(...r)),f.style.colorScheme=p?"light":"dark",e){const k=document.querySelector('meta[name="theme-color"]');k&&k.setAttribute("content",m==="light"?e.light:e.dark)}g&&(f.setAttribute("data-theme",g),localStorage.setItem(u,g)),localStorage.setItem(l,m)}var Pn=C('<meta name="theme-color">');function On(t,e){Te(e,!0);var r=Mt(),n=Q(r);{var o=l=>{var u=Pn();K(()=>at(u,"content",e.themeColors.dark)),E(l,u)};q(n,l=>{e.themeColors&&l(o)})}E(t,r),ze()}var jn=C('<meta name="theme-color">'),Gn=C("<!> <!>",1);function Wn(t,e){Te(e,!0);let r=P(e,"trueNonce",3,"");Rt(n=>{var o=Gn(),l=Q(o);{var u=m=>{var g=jn();K(()=>at(g,"content",e.themeColors.dark)),E(m,g)};q(l,m=>{e.themeColors&&m(u)})}var f=b(l,2);Cr(f,()=>`<script${r()?` nonce=${r()}`:""}>(`+Ln.toString()+")("+JSON.stringify(e.initConfig)+");<\/script>"),E(n,o)}),ze()}function Dn(t,e){Te(e,!0);let r=P(e,"track",3,!0),n=P(e,"defaultMode",3,"system"),o=P(e,"disableTransitions",3,!0),l=P(e,"darkClassNames",19,()=>["dark"]),u=P(e,"lightClassNames",19,()=>[]),f=P(e,"defaultTheme",3,""),m=P(e,"nonce",3,""),g=P(e,"themeStorageKey",3,"mode-watcher-theme"),p=P(e,"modeStorageKey",3,"mode-watcher-mode"),k=P(e,"disableHeadScriptInjection",3,!1);H(()=>{it.current=o()}),H(()=>{ae.current=e.themeColors}),H(()=>{Ot.current=l()}),H(()=>{jt.current=u()}),H(()=>{Pe.current=p()}),H(()=>{Oe.current=g()}),H(()=>{xn.current}),H(()=>{Bn.current}),Ct(()=>{rt.tracking(r()),rt.query();const T=localStorage.getItem(Pe.current);In(et(T)?T:n());const se=localStorage.getItem(Oe.current);Nn(se||f())});const G={defaultMode:n(),themeColors:e.themeColors,darkClassNames:l(),lightClassNames:u(),defaultTheme:f(),modeStorageKey:p(),themeStorageKey:g()},W=Ge(()=>typeof window>"u"?m():"");var s=Mt(),i=Q(s);{var _=T=>{On(T,{get themeColors(){return ae.current}})},V=T=>{Wn(T,{get trueNonce(){return d(W)},initConfig:G,get themeColors(){return ae.current}})};q(i,T=>{k()?T(_):T(V,!1)})}E(t,s),ze()}var Fn=yr(`<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-TVHZWJGB"><\/script> <script>
      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
      });
    <\/script>`,1),Vn=C('<link rel="canonical" href="https://pexos.netlify.app"> <meta name="robots" content="index, follow"> <meta name="google-site-verification" content="fP4cuGw4wrszN9kcVbzYHTB8bKj4YSxHTyZDSGOvyPk"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta property="og:title" content="Pexos, collaborative creative platform"> <meta property="og:description" content="Log in and start creating."> <meta property="og:image" content="/logo192.png"> <meta property="og:url" content="https://pexos.netlify.app"> <meta property="og:type" content="website"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:title" content="Pexos, collaborative creative platform"> <meta name="twitter:description" content="Log in and start creating."> <meta name="twitter:image" content="/logo192.png"> <!>',1),Xn=C("<div>Loading...</div>"),qn=C("<!> <!>",1),Un=C("<noscript></noscript> <!> <!>",1);function fa(t,e){Te(e,!0);const[r,n]=xt(),o=()=>_e(u,"$sessionStore",r),l=()=>_e(f,"$loading",r);Ct(()=>{document.documentElement.setAttribute("data-theme","dark")});const u=$e(e.data.session),f=$e(!0);Be.auth.getSession().then(({data:{session:s},error:i})=>{console.log("Client session loaded at:",new Date().toISOString()),i&&console.error("Session load error:",i.message),u.set(s||e.data.session),f.set(!1)}).catch(s=>{console.error("Session load error:",s),u.set(e.data.session||null),f.set(!1)}),Be.auth.onAuthStateChange((s,i)=>{var _;console.log("Auth state changed:",s,(_=i==null?void 0:i.user)==null?void 0:_.email),u.set(i),s==="SIGNED_OUT"&&window.location.pathname!=="/"&&(console.log("User signed out, redirecting to /"),pe("/",{replaceState:!0}))});async function m(){if(o()){console.log("Initiating sign out"),f.set(!0);try{const{error:s}=await Be.auth.signOut();if(s)throw s;console.log("Signed out successfully")}catch(s){console.error("Sign out failed:",s)}finally{f.set(!1)}}}var g=Un();Rt(s=>{var i=Vn(),_=b(Q(i),26);{var V=T=>{var se=Fn();_r(2),E(T,se)};q(_,T=>{T(V)})}E(s,i)});var p=b(Q(g),2);Dn(p,{default:"light",themeColors:{light:"#f0f0f0",dark:"#1a1a1a"},disableTransitions:!0});var k=b(p,2);{var G=s=>{var i=Xn();E(s,i)},W=s=>{var i=qn(),_=Q(i);Dr(_,{get session(){return o()},onAuthToggle:m});var V=b(_,2);Rr(V,()=>e.children),E(s,i)};q(k,s=>{l()?s(G):s(W,!1)})}E(t,g),ze(),n()}export{fa as component};
