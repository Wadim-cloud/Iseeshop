import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as ie,an as fe,A as r,G,ak as he,ao as pe,aq as T,x as s,a as oe,aB as ge,ap as _e,at as b,ar as P,w as Z,au as f}from"./CgpLTG9e.js";import{e as _,s as be}from"./C_m-qMmZ.js";import{i as L}from"./ClXQIVwo.js";import{e as $}from"./B6FZq7_G.js";import{n as we,a as w,c as ke,t as I,b as ee}from"./CVxkZOGS.js";import{s as te}from"./CZQXRoan.js";import{t as se,a as Be,f as je}from"./sPbp32sz.js";import{s as ae}from"./Bfc47y5P.js";import{i as re}from"./CKI-jMsq.js";import{p as J}from"./Bxv1m9ax.js";import{s as ye}from"./BX0sDDBR.js";import{s as Re}from"./B9RedXCH.js";var xe=we('<svg class="spinner svelte-rv4oqt" viewBox="0 0 50 50"><circle cx="25" cy="25" r="20" fill="none" stroke="currentColor" stroke-width="5" class="svelte-rv4oqt"></circle></svg>');function le(O,x){ie(x,!1);const C=G();let M=J(x,"size",8,"md"),S=J(x,"color",8,"currentColor");fe(()=>he(M()),()=>{r(C,{sm:"16px",md:"24px",lg:"32px"}[M()])}),pe(),re();var h=xe();T(()=>Re(h,`width: ${s(C)}; height: ${s(C)}; color: ${S()}`)),w(O,h),oe()}var Ce=I("<div></div>"),Ge=I("<div></div>"),Me=I('<div class="error-message svelte-t9ijrl" role="alert"> </div>'),Se=I('<div class="modal-overlay svelte-t9ijrl"><div class="modal svelte-t9ijrl"><button class="close-button svelte-t9ijrl" aria-label="Close authentication modal"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M18 6L6 18M6 6l12 12" stroke="white" stroke-width="2" stroke-linecap="round"></path></svg></button> <h2 class="svelte-t9ijrl">Sign In to Pexos</h2> <div class="provider-buttons svelte-t9ijrl"><button class="provider-button google svelte-t9ijrl" aria-label="Sign in with Google"><span class="provider-icon svelte-t9ijrl"><div class="navbar svelte-t9ijrl"></div></span> <!></button> <button class="provider-button github svelte-t9ijrl" aria-label="Sign in with GitHub"><span class="provider-icon svelte-t9ijrl"><div class="navbar alt-theme svelte-t9ijrl"></div></span> <!></button></div> <!></div></div>');function Fe(O,x){ie(x,!1);let C=J(x,"show",12);const M=ge();let S=G(null),h=G(null),q=G(null);const H=10,ne=5;function K(){return Array(50).fill().map((t,l)=>({id:l,isBlack:!1,isBlue:!1,isRed:!1,navigateTo:null}))}let k=G(K()),B=G(K()),ce=[],ve=[];function N(t,l,n){const v=t.currentTarget.getBoundingClientRect(),p=t.clientX-v.left,d=t.clientY-v.top,u=v.width/H,X=v.height/ne,z=Math.floor(p/u),E=Math.floor(d/X),m=E*H+z;let o=l.map(i=>({...i,isBlue:!1}));const y=o.map((i,c)=>{const D=Math.floor(c/H),F=c%H,e=Math.sqrt((F-z)**2+(D-E)**2);return{index:c,distance:e}});y.sort((i,c)=>i.distance-c.distance);const Y=y.slice(0,3).map(i=>i.index);o=o.map((i,c)=>({...i,isBlue:Y.includes(c)&&!i.isBlack})),m>=0&&m<o.length&&!o[m].isBlack&&setTimeout(()=>{o=o.map((i,c)=>({...i,isRed:c===m&&!i.isBlack})),n([...o]),setTimeout(()=>{o=o.map((i,c)=>({...i,isRed:c===m?!1:i.isRed})),n([...o])},500)},100),n([...o])}function Q(t,l,n,j,v){if(j.length<2&&!l[t].isBlack){const p=l.map((d,u)=>({...d,isBlack:u===t?!0:d.isBlack,isBlue:u===t?!1:d.isBlue,isRed:u===t?!1:d.isRed}));j.push(t),n([...p]),j.length===1&&W(v)}}function U(t,l){t(l.map(n=>({...n,isBlue:!1,isRed:!1})))}async function de(t){r(h,t),r(q,null);try{const{error:l}=await ye.auth.signInWithOAuth({provider:t,options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(l)throw l;M("authSuccess")}catch(l){const n=l instanceof Error?l.message:"Login failed";console.error(`${t} login error:`,l),r(q,n),M("authError",{message:n})}finally{r(h,null),r(S,null)}}function W(t){console.log(`Provider clicked: ${t}`),r(S,t),de(t)}re();var V=ke(),ue=_e(V);{var me=t=>{var l=Se(),n=b(l),j=b(n),v=P(j,4),p=b(v),d=b(p),u=b(d);$(u,5,()=>s(k),e=>e.id,(e,a)=>{var g=Ce();let A;T(R=>A=te(g,1,"block svelte-t9ijrl",null,A,R),[()=>({black:s(a).isBlack,blue:s(a).isBlue,red:s(a).isRed})],Z),_("click",g,ae(()=>Q(s(a).id,s(k),R=>r(k,R),ce,"google"))),w(e,g)}),f(u),f(d);var X=P(d,2);{var z=e=>{le(e,{size:"sm",color:"white"})},E=e=>{var a=ee("Sign in with Google");w(e,a)};L(X,e=>{s(h)==="google"?e(z):e(E,!1)})}f(p);var m=P(p,2),o=b(m),y=b(o);$(y,5,()=>s(B),e=>e.id,(e,a)=>{var g=Ge();let A;T(R=>A=te(g,1,"block svelte-t9ijrl",null,A,R),[()=>({black:s(a).isBlack,"alt-blue":s(a).isBlue,"alt-red":s(a).isRed})],Z),_("click",g,ae(()=>Q(s(a).id,s(B),R=>r(B,R),ve,"github"))),w(e,g)}),f(y),f(o);var Y=P(o,2);{var i=e=>{le(e,{size:"sm",color:"white"})},c=e=>{var a=ee("Sign in with GitHub");w(e,a)};L(Y,e=>{s(h)==="github"?e(i):e(c,!1)})}f(m),f(v);var D=P(v,2);{var F=e=>{var a=Me(),g=b(a,!0);f(a),T(()=>be(g,s(q))),w(e,a)};L(D,e=>{s(q)&&e(F)})}f(n),f(l),T(()=>{p.disabled=s(h)==="google",m.disabled=s(h)==="github"}),_("click",j,()=>{console.log("Close button clicked"),C(!1),r(S,null),r(q,null)}),_("mousemove",u,e=>N(e,s(k),a=>r(k,a))),_("mouseleave",u,()=>U(e=>r(k,e),s(k))),_("click",p,()=>W("google")),_("mousemove",y,e=>N(e,s(B),a=>r(B,a))),_("mouseleave",y,()=>U(e=>r(B,e),s(B))),_("click",m,()=>W("github")),se(3,n,()=>Be,()=>({y:100,duration:400})),se(3,l,()=>je,()=>({duration:300})),w(t,l)};L(ue,t=>{C()&&t(me)})}w(O,V),oe()}export{Fe as A};
