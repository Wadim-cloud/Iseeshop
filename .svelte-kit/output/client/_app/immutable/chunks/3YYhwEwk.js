import{n as me,a as w,c as he,t as L,b as Z}from"./B2hSDNwb.js";import{i as ie}from"./BkJq1j4_.js";import{p as oe,ai as ge,A as r,I as M,au as pe,aj as _e,ak as q,x as s,a as re,ay as be,aw as we,am as b,al as T,w as $,an as m}from"./Bxdg7ccW.js";import{e as _,s as ke}from"./6og0jn-Y.js";import{i as I}from"./Bqnn9XxY.js";import{e as ee}from"./ucczKhfM.js";import{s as te}from"./UMIFvBL3.js";import{t as se,f as Be,a as je}from"./CVktCSDB.js";import{s as ae}from"./Bfc47y5P.js";import{p as J}from"./Czyh_-as.js";import{s as ye}from"./wkM8Wptt.js";import{s as Re}from"./ChDf3tN1.js";var xe=me('<svg class="spinner svelte-rv4oqt" viewBox="0 0 50 50"><circle cx="25" cy="25" r="20" fill="none" stroke="currentColor" stroke-width="5" class="svelte-rv4oqt"></circle></svg>');function le(O,x){oe(x,!1);const C=M();let G=J(x,"size",8,"md"),S=J(x,"color",8,"currentColor");ge(()=>pe(G()),()=>{r(C,{sm:"16px",md:"24px",lg:"32px"}[G()])}),_e(),ie();var h=xe();q(()=>Re(h,`width: ${s(C)}; height: ${s(C)}; color: ${S()}`)),w(O,h),re()}var Ce=L("<div></div>"),Me=L("<div></div>"),Ge=L('<div class="error-message svelte-t9ijrl" role="alert"> </div>'),Se=L('<div class="modal-overlay svelte-t9ijrl"><div class="modal svelte-t9ijrl"><button class="close-button svelte-t9ijrl" aria-label="Close authentication modal"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M18 6L6 18M6 6l12 12" stroke="white" stroke-width="2" stroke-linecap="round"></path></svg></button> <h2 class="svelte-t9ijrl">Sign In to Pexos</h2> <div class="provider-buttons svelte-t9ijrl"><button class="provider-button google svelte-t9ijrl" aria-label="Sign in with Google"><span class="provider-icon svelte-t9ijrl"><div class="navbar svelte-t9ijrl"></div></span> <!></button> <button class="provider-button github svelte-t9ijrl" aria-label="Sign in with GitHub"><span class="provider-icon svelte-t9ijrl"><div class="navbar alt-theme svelte-t9ijrl"></div></span> <!></button></div> <!></div></div>');function Ye(O,x){oe(x,!1);let C=J(x,"show",12);const G=be();let S=M(null),h=M(null),A=M(null);const H=10,ne=5;function K(){return Array(50).fill().map((t,l)=>({id:l,isBlack:!1,isBlue:!1,isRed:!1,navigateTo:null}))}let k=M(K()),B=M(K()),ce=[],ve=[];function N(t,l,n){const v=t.currentTarget.getBoundingClientRect(),g=t.clientX-v.left,d=t.clientY-v.top,u=v.width/H,X=v.height/ne,z=Math.floor(g/u),E=Math.floor(d/X),f=E*H+z;let o=l.map(i=>({...i,isBlue:!1}));const y=o.map((i,c)=>{const D=Math.floor(c/H),F=c%H,e=Math.sqrt((F-z)**2+(D-E)**2);return{index:c,distance:e}});y.sort((i,c)=>i.distance-c.distance);const Y=y.slice(0,3).map(i=>i.index);o=o.map((i,c)=>({...i,isBlue:Y.includes(c)&&!i.isBlack})),f>=0&&f<o.length&&!o[f].isBlack&&setTimeout(()=>{o=o.map((i,c)=>({...i,isRed:c===f&&!i.isBlack})),n([...o]),setTimeout(()=>{o=o.map((i,c)=>({...i,isRed:c===f?!1:i.isRed})),n([...o])},500)},100),n([...o])}function Q(t,l,n,j,v){if(j.length<2&&!l[t].isBlack){const g=l.map((d,u)=>({...d,isBlack:u===t?!0:d.isBlack,isBlue:u===t?!1:d.isBlue,isRed:u===t?!1:d.isRed}));j.push(t),n([...g]),j.length===1&&W(v)}}function U(t,l){t(l.map(n=>({...n,isBlue:!1,isRed:!1})))}async function de(t){r(h,t),r(A,null);try{const{error:l}=await ye.auth.signInWithOAuth({provider:t,options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(l)throw l;G("authSuccess")}catch(l){const n=l instanceof Error?l.message:"Login failed";console.error(`${t} login error:`,l),r(A,n),G("authError",{message:n})}finally{r(h,null),r(S,null)}}function W(t){console.log(`Provider clicked: ${t}`),r(S,t),de(t)}ie();var V=he(),ue=we(V);{var fe=t=>{var l=Se(),n=b(l),j=b(n),v=T(j,4),g=b(v),d=b(g),u=b(d);ee(u,5,()=>s(k),e=>e.id,(e,a)=>{var p=Ce();let P;q(R=>P=te(p,1,"block svelte-t9ijrl",null,P,R),[()=>({black:s(a).isBlack,blue:s(a).isBlue,red:s(a).isRed})],$),_("click",p,ae(()=>Q(s(a).id,s(k),R=>r(k,R),ce,"google"))),w(e,p)}),m(u),m(d);var X=T(d,2);{var z=e=>{le(e,{size:"sm",color:"white"})},E=e=>{var a=Z("Sign in with Google");w(e,a)};I(X,e=>{s(h)==="google"?e(z):e(E,!1)})}m(g);var f=T(g,2),o=b(f),y=b(o);ee(y,5,()=>s(B),e=>e.id,(e,a)=>{var p=Me();let P;q(R=>P=te(p,1,"block svelte-t9ijrl",null,P,R),[()=>({black:s(a).isBlack,"alt-blue":s(a).isBlue,"alt-red":s(a).isRed})],$),_("click",p,ae(()=>Q(s(a).id,s(B),R=>r(B,R),ve,"github"))),w(e,p)}),m(y),m(o);var Y=T(o,2);{var i=e=>{le(e,{size:"sm",color:"white"})},c=e=>{var a=Z("Sign in with GitHub");w(e,a)};I(Y,e=>{s(h)==="github"?e(i):e(c,!1)})}m(f),m(v);var D=T(v,2);{var F=e=>{var a=Ge(),p=b(a,!0);m(a),q(()=>ke(p,s(A))),w(e,a)};I(D,e=>{s(A)&&e(F)})}m(n),m(l),q(()=>{g.disabled=s(h)==="google",f.disabled=s(h)==="github"}),_("click",j,()=>{console.log("Close button clicked"),C(!1),r(S,null),r(A,null)}),_("mousemove",u,e=>N(e,s(k),a=>r(k,a))),_("mouseleave",u,()=>U(e=>r(k,e),s(k))),_("click",g,()=>W("google")),_("mousemove",y,e=>N(e,s(B),a=>r(B,a))),_("mouseleave",y,()=>U(e=>r(B,e),s(B))),_("click",f,()=>W("github")),se(3,n,()=>Be,()=>({y:100,duration:400})),se(3,l,()=>je,()=>({duration:300})),w(t,l)};I(ue,t=>{C()&&t(fe)})}w(O,V),re()}export{Ye as A};
